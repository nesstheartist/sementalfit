{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nessc\\\\Semental fit ultima\\\\sementalfit2\\\\src\\\\components\\\\TrainingPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { getDocs, collection } from 'firebase/firestore';\nimport { db } from '../firebase';\nimport Header from './Header';\nimport ParticlesBackground from './ParticlesBackground';\nimport '../styles/global.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DAYS = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\nfunction getTodayIndex() {\n  const jsDay = new Date().getDay(); // 0=Domingo, 1=Lunes...\n  return jsDay === 0 ? 6 : jsDay - 1;\n}\nconst defaultSet = () => ({\n  weight: '',\n  reps: '',\n  timer: 60,\n  completed: false\n});\nfunction useSetTimers(routine, today) {\n  _s();\n  // Estructura: timers[exIdx][setIdx] = { running, timeLeft, intervalId }\n  const [timers, setTimers] = useState({});\n  const audioRef = useRef(null);\n  useEffect(() => {\n    // Reset timers si cambia el día o la rutina\n    setTimers({});\n  }, [routine, today]);\n  const startTimer = (exIdx, setIdx, initial) => {\n    setTimers(prev => {\n      var _prev$key, _prev$key$timeLeft, _prev$key2;\n      const key = `${exIdx}-${setIdx}`;\n      if ((_prev$key = prev[key]) !== null && _prev$key !== void 0 && _prev$key.running) return prev;\n      const timeLeft = (_prev$key$timeLeft = (_prev$key2 = prev[key]) === null || _prev$key2 === void 0 ? void 0 : _prev$key2.timeLeft) !== null && _prev$key$timeLeft !== void 0 ? _prev$key$timeLeft : initial;\n      let lastTick = Date.now();\n      const intervalId = setInterval(() => {\n        setTimers(current => {\n          var _current$key$timeLeft, _current$key;\n          const now = (_current$key$timeLeft = (_current$key = current[key]) === null || _current$key === void 0 ? void 0 : _current$key.timeLeft) !== null && _current$key$timeLeft !== void 0 ? _current$key$timeLeft : initial;\n          // Calcular el tiempo real transcurrido para evitar saltos dobles\n          const nowTick = Date.now();\n          const elapsed = Math.floor((nowTick - lastTick) / 1000);\n          if (elapsed >= 1) {\n            lastTick = nowTick;\n            if (now > 0) {\n              return {\n                ...current,\n                [key]: {\n                  ...current[key],\n                  timeLeft: now - 1,\n                  running: true,\n                  intervalId\n                }\n              };\n            } else {\n              clearInterval(intervalId);\n              if (window.navigator.vibrate) {\n                window.navigator.vibrate(200);\n              }\n              return {\n                ...current,\n                [key]: {\n                  ...current[key],\n                  timeLeft: 0,\n                  running: false,\n                  intervalId: null\n                }\n              };\n            }\n          }\n          return current;\n        });\n      }, 250); // Intervalo más corto para mayor precisión\n      return {\n        ...prev,\n        [key]: {\n          running: true,\n          timeLeft,\n          intervalId\n        }\n      };\n    });\n  };\n  const pauseTimer = (exIdx, setIdx) => {\n    setTimers(prev => {\n      var _prev$key3;\n      const key = `${exIdx}-${setIdx}`;\n      if ((_prev$key3 = prev[key]) !== null && _prev$key3 !== void 0 && _prev$key3.intervalId) clearInterval(prev[key].intervalId);\n      return {\n        ...prev,\n        [key]: {\n          ...prev[key],\n          running: false,\n          intervalId: null\n        }\n      };\n    });\n  };\n  const resetTimer = (exIdx, setIdx, value) => {\n    setTimers(prev => {\n      var _prev$key4;\n      const key = `${exIdx}-${setIdx}`;\n      if ((_prev$key4 = prev[key]) !== null && _prev$key4 !== void 0 && _prev$key4.intervalId) clearInterval(prev[key].intervalId);\n      return {\n        ...prev,\n        [key]: {\n          running: false,\n          timeLeft: value,\n          intervalId: null\n        }\n      };\n    });\n  };\n  return {\n    timers,\n    startTimer,\n    pauseTimer,\n    resetTimer,\n    audioRef\n  };\n}\n_s(useSetTimers, \"C0NGXPOo8WJ5R5nTsxSllvJ2c+c=\");\nexport default function TrainingPage() {\n  _s2();\n  const [categories, setCategories] = useState([]);\n  const [exercises, setExercises] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [filteredExercises, setFilteredExercises] = useState([]);\n  const [selectedExercise, setSelectedExercise] = useState('');\n  const [routine, setRoutine] = useState({});\n  const [setsCount, setSetsCount] = useState(1);\n  const [today, setToday] = useState(getTodayIndex());\n\n  // Timers para sets\n  const {\n    timers,\n    startTimer,\n    pauseTimer,\n    resetTimer,\n    audioRef\n  } = useSetTimers(routine, today);\n\n  // Cargar categorías y ejercicios\n  useEffect(() => {\n    async function fetchData() {\n      const catSnap = await getDocs(collection(db, 'categories'));\n      const cats = catSnap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setCategories(cats);\n      const exSnap = await getDocs(collection(db, 'exercises'));\n      const exs = exSnap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setExercises(exs);\n    }\n    fetchData();\n  }, []);\n\n  // Filtrar ejercicios por categoría\n  useEffect(() => {\n    if (selectedCategory) {\n      setFilteredExercises(exercises.filter(e => e.categoryId === selectedCategory));\n    } else {\n      setFilteredExercises([]);\n    }\n    setSelectedExercise('');\n  }, [selectedCategory, exercises]);\n\n  // Cargar rutina del día desde localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('training_routine');\n    if (saved) setRoutine(JSON.parse(saved));\n  }, []);\n\n  // Guardar rutina en localStorage\n  useEffect(() => {\n    localStorage.setItem('training_routine', JSON.stringify(routine));\n  }, [routine]);\n\n  // Agrupar ejercicios por categoría para el select\n  const exercisesByCategory = categories.reduce((acc, cat) => {\n    acc[cat.id] = exercises.filter(ex => ex.categoryId === cat.id);\n    return acc;\n  }, {});\n  const handleAddExercise = () => {\n    if (!selectedExercise) return;\n    const ex = exercises.find(e => e.id === selectedExercise);\n    const newSets = Array.from({\n      length: setsCount\n    }, defaultSet);\n    setRoutine(prev => {\n      var _categories$find;\n      const day = DAYS[today];\n      const prevDay = prev[day] || [];\n      return {\n        ...prev,\n        [day]: [...prevDay, {\n          id: ex.id,\n          name: ex.name,\n          category: ((_categories$find = categories.find(c => c.id === ex.categoryId)) === null || _categories$find === void 0 ? void 0 : _categories$find.name) || '',\n          series: newSets\n        }]\n      };\n    });\n    setSelectedExercise('');\n    setSetsCount(1);\n  };\n  const handleSetChange = (exIdx, setIdx, field, value) => {\n    const day = DAYS[today];\n    setRoutine(prev => {\n      const updated = [...(prev[day] || [])];\n      const ex = {\n        ...updated[exIdx]\n      };\n      const series = [...ex.series];\n      series[setIdx] = {\n        ...series[setIdx],\n        [field]: value\n      };\n      ex.series = series;\n      updated[exIdx] = ex;\n      return {\n        ...prev,\n        [day]: updated\n      };\n    });\n    if (field === 'timer') resetTimer(exIdx, setIdx, Number(value));\n  };\n  const handleRemoveExercise = exIdx => {\n    const day = DAYS[today];\n    setRoutine(prev => {\n      const updated = [...(prev[day] || [])];\n      updated.splice(exIdx, 1);\n      return {\n        ...prev,\n        [day]: updated\n      };\n    });\n  };\n  const handleDayChange = idx => setToday(idx);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen text-white p-4 pb-24 neon-luxury\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"neon-glow-luxury\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ParticlesBackground, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black/40 backdrop-blur-sm rounded-xl p-4 border border-neon-gold/30 shadow-neon-sm\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between gap-2\",\n          children: DAYS.map((d, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDayChange(i),\n            className: `flex-1 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${today === i ? 'bg-gradient-to-r from-neon-gold to-neon-gold-dark text-black shadow-neon' : 'bg-black/30 text-gray-300 border border-neon-gold/20 hover:border-neon-gold/40'}`,\n            children: d.slice(0, 3)\n          }, d, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black/40 backdrop-blur-sm rounded-xl p-6 border border-neon-gold/30 shadow-neon-sm\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedCategory,\n            onChange: e => setSelectedCategory(e.target.value),\n            className: \"w-full px-4 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona categor\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: c.id,\n              children: c.name\n            }, c.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 36\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedExercise,\n            onChange: e => setSelectedExercise(e.target.value),\n            className: \"w-full px-4 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\",\n            disabled: !selectedCategory,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Selecciona ejercicio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), categories.map(cat => {\n              var _exercisesByCategory$;\n              return ((_exercisesByCategory$ = exercisesByCategory[cat.id]) === null || _exercisesByCategory$ === void 0 ? void 0 : _exercisesByCategory$.length) > 0 && /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                label: cat.name,\n                children: exercisesByCategory[cat.id].map(ex => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: ex.id,\n                  children: [ex.name, \" (\", ex.difficulty, \")\"]\n                }, ex.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this))\n              }, cat.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-neon-gold\",\n                children: \"Sets:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: 1,\n                max: 10,\n                value: setsCount,\n                onChange: e => setSetsCount(Number(e.target.value)),\n                className: \"w-16 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddExercise,\n              className: \"flex-1 px-4 py-2 bg-gradient-to-r from-neon-gold to-neon-gold-dark text-black font-semibold rounded-lg shadow-neon-sm hover:shadow-neon transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed\",\n              disabled: !selectedExercise,\n              children: \"Agregar Ejercicio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: (routine[DAYS[today]] || []).map((ex, exIdx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-black/40 backdrop-blur-sm rounded-xl p-6 border border-neon-gold/30 shadow-neon-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-bold text-neon-gold\",\n              children: ex.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleRemoveExercise(exIdx),\n              className: \"p-2 text-red-400 hover:text-red-300 transition-colors duration-300\",\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: ex.series.map((set, setIdx) => {\n              const key = `${exIdx}-${setIdx}`;\n              const timerState = timers[key] || {\n                running: false,\n                timeLeft: set.timer\n              };\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4 p-3 bg-black/20 rounded-lg border border-neon-gold/10\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-neon-gold font-medium\",\n                  children: [\"Set \", setIdx + 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Kg\",\n                  value: set.weight,\n                  onChange: e => handleSetChange(exIdx, setIdx, 'weight', e.target.value),\n                  className: \"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  placeholder: \"Reps\",\n                  value: set.reps,\n                  onChange: e => handleSetChange(exIdx, setIdx, 'reps', e.target.value),\n                  className: \"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"Seg\",\n                    value: set.timer,\n                    onChange: e => handleSetChange(exIdx, setIdx, 'timer', e.target.value),\n                    className: \"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => timerState.running ? pauseTimer(exIdx, setIdx) : startTimer(exIdx, setIdx, set.timer),\n                    className: `px-4 py-2 rounded-lg ${timerState.running ? 'bg-red-500/20 text-red-400 border border-red-500/30' : 'bg-neon-gold/20 text-neon-gold border border-neon-gold/30'} transition-all duration-300`,\n                    children: timerState.running ? '⏸️' : '▶️'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-3 py-2 rounded-lg ${timerState.running ? 'bg-red-500/20 text-red-400 border border-red-500/30' : 'bg-black/30 text-white border border-neon-gold/20'}`,\n                    children: [timerState.timeLeft, \"s\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: set.completed,\n                  onChange: e => handleSetChange(exIdx, setIdx, 'completed', e.target.checked),\n                  className: \"w-5 h-5 rounded border-neon-gold/30 text-neon-gold focus:ring-neon-gold\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 23\n                }, this)]\n              }, setIdx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)]\n        }, exIdx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n}\n_s2(TrainingPage, \"rtpYPZl2QJXpSU8LQVxYss6Eep8=\", false, function () {\n  return [useSetTimers];\n});\n_c = TrainingPage;\nvar _c;\n$RefreshReg$(_c, \"TrainingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","getDocs","collection","db","Header","ParticlesBackground","jsxDEV","_jsxDEV","DAYS","getTodayIndex","jsDay","Date","getDay","defaultSet","weight","reps","timer","completed","useSetTimers","routine","today","_s","timers","setTimers","audioRef","startTimer","exIdx","setIdx","initial","prev","_prev$key","_prev$key$timeLeft","_prev$key2","key","running","timeLeft","lastTick","now","intervalId","setInterval","current","_current$key$timeLeft","_current$key","nowTick","elapsed","Math","floor","clearInterval","window","navigator","vibrate","pauseTimer","_prev$key3","resetTimer","value","_prev$key4","TrainingPage","_s2","categories","setCategories","exercises","setExercises","selectedCategory","setSelectedCategory","filteredExercises","setFilteredExercises","selectedExercise","setSelectedExercise","setRoutine","setsCount","setSetsCount","setToday","fetchData","catSnap","cats","docs","map","doc","id","data","exSnap","exs","filter","e","categoryId","saved","localStorage","getItem","JSON","parse","setItem","stringify","exercisesByCategory","reduce","acc","cat","ex","handleAddExercise","find","newSets","Array","from","length","_categories$find","day","prevDay","name","category","c","series","handleSetChange","field","updated","Number","handleRemoveExercise","splice","handleDayChange","idx","className","children","fileName","_jsxFileName","lineNumber","columnNumber","d","i","onClick","slice","onChange","target","disabled","_exercisesByCategory$","label","difficulty","type","min","max","set","timerState","placeholder","checked","_c","$RefreshReg$"],"sources":["C:/Users/nessc/Semental fit ultima/sementalfit2/src/components/TrainingPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { getDocs, collection } from 'firebase/firestore';\nimport { db } from '../firebase';\nimport Header from './Header';\nimport ParticlesBackground from './ParticlesBackground';\nimport '../styles/global.css';\n\nconst DAYS = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\n\nfunction getTodayIndex() {\n  const jsDay = new Date().getDay(); // 0=Domingo, 1=Lunes...\n  return jsDay === 0 ? 6 : jsDay - 1;\n}\n\nconst defaultSet = () => ({ weight: '', reps: '', timer: 60, completed: false });\n\nfunction useSetTimers(routine, today) {\n  // Estructura: timers[exIdx][setIdx] = { running, timeLeft, intervalId }\n  const [timers, setTimers] = useState({});\n  const audioRef = useRef(null);\n\n  useEffect(() => {\n    // Reset timers si cambia el día o la rutina\n    setTimers({});\n  }, [routine, today]);\n\n  const startTimer = (exIdx, setIdx, initial) => {\n    setTimers(prev => {\n      const key = `${exIdx}-${setIdx}`;\n      if (prev[key]?.running) return prev;\n      const timeLeft = prev[key]?.timeLeft ?? initial;\n      let lastTick = Date.now();\n      const intervalId = setInterval(() => {\n        setTimers(current => {\n          const now = current[key]?.timeLeft ?? initial;\n          // Calcular el tiempo real transcurrido para evitar saltos dobles\n          const nowTick = Date.now();\n          const elapsed = Math.floor((nowTick - lastTick) / 1000);\n          if (elapsed >= 1) {\n            lastTick = nowTick;\n            if (now > 0) {\n              return { ...current, [key]: { ...current[key], timeLeft: now - 1, running: true, intervalId } };\n            } else {\n              clearInterval(intervalId);\n              if (window.navigator.vibrate) {\n                window.navigator.vibrate(200);\n              }\n              return { ...current, [key]: { ...current[key], timeLeft: 0, running: false, intervalId: null } };\n            }\n          }\n          return current;\n        });\n      }, 250); // Intervalo más corto para mayor precisión\n      return { ...prev, [key]: { running: true, timeLeft, intervalId } };\n    });\n  };\n\n  const pauseTimer = (exIdx, setIdx) => {\n    setTimers(prev => {\n      const key = `${exIdx}-${setIdx}`;\n      if (prev[key]?.intervalId) clearInterval(prev[key].intervalId);\n      return { ...prev, [key]: { ...prev[key], running: false, intervalId: null } };\n    });\n  };\n\n  const resetTimer = (exIdx, setIdx, value) => {\n    setTimers(prev => {\n      const key = `${exIdx}-${setIdx}`;\n      if (prev[key]?.intervalId) clearInterval(prev[key].intervalId);\n      return { ...prev, [key]: { running: false, timeLeft: value, intervalId: null } };\n    });\n  };\n\n  return { timers, startTimer, pauseTimer, resetTimer, audioRef };\n}\n\nexport default function TrainingPage() {\n  const [categories, setCategories] = useState([]);\n  const [exercises, setExercises] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [filteredExercises, setFilteredExercises] = useState([]);\n  const [selectedExercise, setSelectedExercise] = useState('');\n  const [routine, setRoutine] = useState({});\n  const [setsCount, setSetsCount] = useState(1);\n  const [today, setToday] = useState(getTodayIndex());\n\n  // Timers para sets\n  const { timers, startTimer, pauseTimer, resetTimer, audioRef } = useSetTimers(routine, today);\n\n  // Cargar categorías y ejercicios\n  useEffect(() => {\n    async function fetchData() {\n      const catSnap = await getDocs(collection(db, 'categories'));\n      const cats = catSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setCategories(cats);\n      const exSnap = await getDocs(collection(db, 'exercises'));\n      const exs = exSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setExercises(exs);\n    }\n    fetchData();\n  }, []);\n\n  // Filtrar ejercicios por categoría\n  useEffect(() => {\n    if (selectedCategory) {\n      setFilteredExercises(exercises.filter(e => e.categoryId === selectedCategory));\n    } else {\n      setFilteredExercises([]);\n    }\n    setSelectedExercise('');\n  }, [selectedCategory, exercises]);\n\n  // Cargar rutina del día desde localStorage\n  useEffect(() => {\n    const saved = localStorage.getItem('training_routine');\n    if (saved) setRoutine(JSON.parse(saved));\n  }, []);\n\n  // Guardar rutina en localStorage\n  useEffect(() => {\n    localStorage.setItem('training_routine', JSON.stringify(routine));\n  }, [routine]);\n\n  // Agrupar ejercicios por categoría para el select\n  const exercisesByCategory = categories.reduce((acc, cat) => {\n    acc[cat.id] = exercises.filter(ex => ex.categoryId === cat.id);\n    return acc;\n  }, {});\n\n  const handleAddExercise = () => {\n    if (!selectedExercise) return;\n    const ex = exercises.find(e => e.id === selectedExercise);\n    const newSets = Array.from({ length: setsCount }, defaultSet);\n    setRoutine(prev => {\n      const day = DAYS[today];\n      const prevDay = prev[day] || [];\n      return {\n        ...prev,\n        [day]: [\n          ...prevDay,\n          {\n            id: ex.id,\n            name: ex.name,\n            category: categories.find(c => c.id === ex.categoryId)?.name || '',\n            series: newSets\n          }\n        ]\n      };\n    });\n    setSelectedExercise('');\n    setSetsCount(1);\n  };\n\n  const handleSetChange = (exIdx, setIdx, field, value) => {\n    const day = DAYS[today];\n    setRoutine(prev => {\n      const updated = [...(prev[day] || [])];\n      const ex = { ...updated[exIdx] };\n      const series = [...ex.series];\n      series[setIdx] = { ...series[setIdx], [field]: value };\n      ex.series = series;\n      updated[exIdx] = ex;\n      return { ...prev, [day]: updated };\n    });\n    if (field === 'timer') resetTimer(exIdx, setIdx, Number(value));\n  };\n\n  const handleRemoveExercise = (exIdx) => {\n    const day = DAYS[today];\n    setRoutine(prev => {\n      const updated = [...(prev[day] || [])];\n      updated.splice(exIdx, 1);\n      return { ...prev, [day]: updated };\n    });\n  };\n\n  const handleDayChange = (idx) => setToday(idx);\n\n  return (\n    <div className=\"min-h-screen text-white p-4 pb-24 neon-luxury\">\n      <div className=\"neon-glow-luxury\"></div>\n      <ParticlesBackground />\n      <Header />\n      \n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        {/* Selector de días */}\n        <div className=\"bg-black/40 backdrop-blur-sm rounded-xl p-4 border border-neon-gold/30 shadow-neon-sm\">\n          <div className=\"flex justify-between gap-2\">\n            {DAYS.map((d, i) => (\n              <button\n                key={d}\n                onClick={() => handleDayChange(i)}\n                className={`flex-1 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${\n                  today === i \n                    ? 'bg-gradient-to-r from-neon-gold to-neon-gold-dark text-black shadow-neon' \n                    : 'bg-black/30 text-gray-300 border border-neon-gold/20 hover:border-neon-gold/40'\n                }`}\n              >\n                {d.slice(0,3)}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Panel de agregar ejercicio */}\n        <div className=\"bg-black/40 backdrop-blur-sm rounded-xl p-6 border border-neon-gold/30 shadow-neon-sm\">\n          <div className=\"space-y-4\">\n            <select\n              value={selectedCategory}\n              onChange={e => setSelectedCategory(e.target.value)}\n              className=\"w-full px-4 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n            >\n              <option value=\"\">Selecciona categoría</option>\n              {categories.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n            </select>\n            \n            <select\n              value={selectedExercise}\n              onChange={e => setSelectedExercise(e.target.value)}\n              className=\"w-full px-4 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n              disabled={!selectedCategory}\n            >\n              <option value=\"\">Selecciona ejercicio</option>\n              {categories.map(cat => (\n                exercisesByCategory[cat.id]?.length > 0 && (\n                  <optgroup key={cat.id} label={cat.name}>\n                    {exercisesByCategory[cat.id].map(ex => (\n                      <option key={ex.id} value={ex.id}>{ex.name} ({ex.difficulty})</option>\n                    ))}\n                  </optgroup>\n                )\n              ))}\n            </select>\n\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-neon-gold\">Sets:</span>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={10}\n                  value={setsCount}\n                  onChange={e => setSetsCount(Number(e.target.value))}\n                  className=\"w-16 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                />\n              </div>\n              <button\n                onClick={handleAddExercise}\n                className=\"flex-1 px-4 py-2 bg-gradient-to-r from-neon-gold to-neon-gold-dark text-black font-semibold rounded-lg shadow-neon-sm hover:shadow-neon transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n                disabled={!selectedExercise}\n              >\n                Agregar Ejercicio\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Lista de ejercicios */}\n        <div className=\"space-y-4\">\n          {(routine[DAYS[today]] || []).map((ex, exIdx) => (\n            <div key={exIdx} className=\"bg-black/40 backdrop-blur-sm rounded-xl p-6 border border-neon-gold/30 shadow-neon-sm\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-bold text-neon-gold\">{ex.name}</h3>\n                <button \n                  onClick={() => handleRemoveExercise(exIdx)} \n                  className=\"p-2 text-red-400 hover:text-red-300 transition-colors duration-300\"\n                >\n                  🗑️\n                </button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {ex.series.map((set, setIdx) => {\n                  const key = `${exIdx}-${setIdx}`;\n                  const timerState = timers[key] || { running: false, timeLeft: set.timer };\n                  return (\n                    <div key={setIdx} className=\"flex items-center gap-4 p-3 bg-black/20 rounded-lg border border-neon-gold/10\">\n                      <span className=\"text-neon-gold font-medium\">Set {setIdx + 1}</span>\n                      <input\n                        type=\"number\"\n                        placeholder=\"Kg\"\n                        value={set.weight}\n                        onChange={e => handleSetChange(exIdx, setIdx, 'weight', e.target.value)}\n                        className=\"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                      />\n                      <input\n                        type=\"number\"\n                        placeholder=\"Reps\"\n                        value={set.reps}\n                        onChange={e => handleSetChange(exIdx, setIdx, 'reps', e.target.value)}\n                        className=\"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                      />\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"number\"\n                          placeholder=\"Seg\"\n                          value={set.timer}\n                          onChange={e => handleSetChange(exIdx, setIdx, 'timer', e.target.value)}\n                          className=\"w-20 px-3 py-2 rounded-lg bg-black/30 border border-neon-gold/20 text-white neon-input-luxury\"\n                        />\n                        <button\n                          onClick={() => timerState.running ? pauseTimer(exIdx, setIdx) : startTimer(exIdx, setIdx, set.timer)}\n                          className={`px-4 py-2 rounded-lg ${\n                            timerState.running\n                              ? 'bg-red-500/20 text-red-400 border border-red-500/30'\n                              : 'bg-neon-gold/20 text-neon-gold border border-neon-gold/30'\n                          } transition-all duration-300`}\n                        >\n                          {timerState.running ? '⏸️' : '▶️'}\n                        </button>\n                        <span className={`px-3 py-2 rounded-lg ${\n                          timerState.running ? 'bg-red-500/20 text-red-400 border border-red-500/30' : 'bg-black/30 text-white border border-neon-gold/20'\n                        }`}>\n                          {timerState.timeLeft}s\n                        </span>\n                      </div>\n                      <input\n                        type=\"checkbox\"\n                        checked={set.completed}\n                        onChange={e => handleSetChange(exIdx, setIdx, 'completed', e.target.checked)}\n                        className=\"w-5 h-5 rounded border-neon-gold/30 text-neon-gold focus:ring-neon-gold\"\n                      />\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}