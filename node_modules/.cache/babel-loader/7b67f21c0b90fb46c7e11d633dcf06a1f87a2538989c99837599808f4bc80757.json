{"ast":null,"code":"import { collection, addDoc, getDocs, doc, getDoc, updateDoc, query, where, arrayUnion, setDoc, writeBatch, limit, deleteDoc } from 'firebase/firestore';\nimport { db } from '../firebase';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebase';\n\n// Funciones para usuarios\nexport const createUser = async userData => {\n  try {\n    const docRef = await addDoc(collection(db, \"users\"), {\n      ...userData,\n      level: 1,\n      xp: 0,\n      createdAt: new Date(),\n      lastLogin: new Date()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error(\"Error al crear usuario:\", error);\n    throw error;\n  }\n};\n\n// Función para verificar si los ejercicios están inicializados\nconst checkExercisesInitialized = async () => {\n  try {\n    const exercisesRef = collection(db, 'exercises');\n    const q = query(exercisesRef, limit(1));\n    const querySnapshot = await getDocs(q);\n    return !querySnapshot.empty;\n  } catch (error) {\n    console.error('Error al verificar ejercicios:', error);\n    return false;\n  }\n};\n\n// Función para inicializar todos los ejercicios automáticamente\nconst initializeAllExercises = async () => {\n  try {\n    const categories = ['Pecho', 'Espalda', 'Hombros', 'Piernas', 'Gemelos', 'Bíceps', 'Tríceps', 'Abdominales'];\n    for (const category of categories) {\n      await initializeExercisesByCategory(category);\n    }\n    return true;\n  } catch (error) {\n    console.error('Error al inicializar ejercicios:', error);\n    return false;\n  }\n};\n\n// Función para obtener un usuario\nexport const getUser = async () => {\n  try {\n    // Primero verificar si los ejercicios están inicializados\n    const exercisesInitialized = await checkExercisesInitialized();\n    if (!exercisesInitialized) {\n      console.log('Inicializando ejercicios automáticamente...');\n      await initializeAllExercises();\n    }\n    const usersRef = collection(db, 'users');\n    const q = query(usersRef, limit(1));\n    const querySnapshot = await getDocs(q);\n    if (!querySnapshot.empty) {\n      const userDoc = querySnapshot.docs[0];\n      return {\n        id: userDoc.id,\n        ...userDoc.data()\n      };\n    } else {\n      // Si no existe ningún usuario, crear uno por defecto\n      const defaultUser = {\n        name: 'Usuario',\n        level: 'Principiante',\n        experience: 0,\n        goals: ['Ganar masa muscular', 'Mejorar la fuerza'],\n        levelName: 'Novato',\n        discount: 0.1,\n        xp: 0\n      };\n      const docRef = await addDoc(collection(db, 'users'), defaultUser);\n      return {\n        id: docRef.id,\n        ...defaultUser\n      };\n    }\n  } catch (error) {\n    console.error('Error al obtener usuario:', error);\n    // En caso de error, devolver un usuario por defecto\n    return {\n      name: 'Usuario',\n      level: 'Principiante',\n      experience: 0,\n      goals: ['Ganar masa muscular', 'Mejorar la fuerza'],\n      levelName: 'Novato',\n      discount: 0.1,\n      xp: 0\n    };\n  }\n};\n\n// Funciones para rutinas\nexport const saveWorkout = async (userId, workoutData) => {\n  try {\n    const docRef = await addDoc(collection(db, \"workouts\"), {\n      userId,\n      ...workoutData,\n      completedAt: new Date()\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error(\"Error al guardar rutina:\", error);\n    throw error;\n  }\n};\nexport const getUserWorkouts = async userId => {\n  try {\n    const q = query(collection(db, \"workouts\"), where(\"userId\", \"==\", userId));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (error) {\n    console.error(\"Error al obtener rutinas:\", error);\n    throw error;\n  }\n};\n\n// Funciones para progreso\nexport const updateProgress = async (userId, progressData) => {\n  try {\n    const userRef = doc(db, \"users\", userId);\n    await updateDoc(userRef, {\n      xp: progressData.xp,\n      level: progressData.level,\n      lastUpdated: new Date()\n    });\n  } catch (error) {\n    console.error(\"Error al actualizar progreso:\", error);\n    throw error;\n  }\n};\n\n// Función para obtener todos los usuarios\nexport const getUsers = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, 'users'));\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (error) {\n    console.error(\"Error al obtener usuarios:\", error);\n    throw error;\n  }\n};\n\n// Función para obtener todos los ejercicios\nexport const getAllExercises = async () => {\n  try {\n    const exercisesRef = collection(db, 'exercises');\n    const querySnapshot = await getDocs(exercisesRef);\n    if (querySnapshot.empty) {\n      console.log('No se encontraron ejercicios, inicializando...');\n      await initializeAllExercises();\n      // Intentar obtener los ejercicios nuevamente después de inicializar\n      const newQuerySnapshot = await getDocs(exercisesRef);\n      if (newQuerySnapshot.empty) {\n        throw new Error('No se pudieron cargar los ejercicios después de la inicialización');\n      }\n      return newQuerySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n    }\n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  } catch (error) {\n    console.error('Error al obtener ejercicios:', error);\n    throw new Error('Error al cargar los ejercicios: ' + error.message);\n  }\n};\n\n// Funciones para rutinas personalizadas\nexport const createUserRoutine = async (userId, day, exercises) => {\n  try {\n    const routineRef = doc(db, \"user_routines\", userId);\n    await setDoc(routineRef, {\n      [day]: exercises\n    }, {\n      merge: true\n    });\n    return true;\n  } catch (error) {\n    console.error(\"Error al crear rutina:\", error);\n    throw error;\n  }\n};\nexport const getUserRoutine = async userId => {\n  try {\n    if (!userId) {\n      throw new Error('Se requiere userId para obtener la rutina');\n    }\n    const routineDoc = await getDoc(doc(db, 'user_routines', userId));\n    if (routineDoc.exists()) {\n      return routineDoc.data();\n    } else {\n      // Si no existe la rutina, crear una nueva con días vacíos\n      const newRoutine = {\n        Lunes: [],\n        Martes: [],\n        Miércoles: [],\n        Jueves: [],\n        Viernes: [],\n        Sábado: [],\n        Domingo: [],\n        lastUpdated: new Date().toISOString()\n      };\n      await setDoc(doc(db, 'user_routines', userId), newRoutine);\n      return newRoutine;\n    }\n  } catch (error) {\n    console.error('Error al obtener rutina:', error);\n    throw error;\n  }\n};\nexport const updateExerciseInRoutine = async (userId, day, exerciseId, newData) => {\n  try {\n    const routineRef = doc(db, \"user_routines\", userId);\n    const routineSnap = await getDoc(routineRef);\n    if (routineSnap.exists()) {\n      const routine = routineSnap.data();\n      const dayExercises = routine[day] || [];\n      const updatedExercises = dayExercises.map(ex => ex.id === exerciseId ? {\n        ...ex,\n        ...newData\n      } : ex);\n      await updateDoc(routineRef, {\n        [day]: updatedExercises\n      });\n      return true;\n    }\n    return false;\n  } catch (error) {\n    console.error(\"Error al actualizar ejercicio:\", error);\n    throw error;\n  }\n};\n\n// Función para inicializar ejercicios en la base de datos\nexport const initializeExercises = async () => {\n  const exercisesByCategory = {\n    'Pecho': [{\n      name: 'Press banca plano con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press banca plano con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Press inclinado con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press inclinado con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Press declinado con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press declinado con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con mancuernas en banco plano',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas en banco inclinado',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas en peck-deck (contractora)',\n      category: 'Pecho'\n    }, {\n      name: 'Fondos en paralelas (pecho)',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones clásicas',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones inclinadas',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones con lastre',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones con palmada',\n      category: 'Pecho'\n    }, {\n      name: 'Press en máquina Hammer',\n      category: 'Pecho'\n    }, {\n      name: 'Press en máquina inclinada',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con polea alta',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con polea baja',\n      category: 'Pecho'\n    }, {\n      name: 'Press con polea de pie',\n      category: 'Pecho'\n    }, {\n      name: 'Svend press (con disco)',\n      category: 'Pecho'\n    }],\n    'Espalda': [{\n      name: 'Dominadas pronas',\n      category: 'Espalda'\n    }, {\n      name: 'Dominadas supinas',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con barra',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con mancuerna a una mano',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en máquina Hammer',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en polea baja',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en T-bar',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón al pecho (polea alta)',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón tras nuca',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón al pecho con agarre neutro',\n      category: 'Espalda'\n    }, {\n      name: 'Pull-over con mancuerna',\n      category: 'Espalda'\n    }, {\n      name: 'Pull-over en polea alta',\n      category: 'Espalda'\n    }, {\n      name: 'Remo invertido (inverted row)',\n      category: 'Espalda'\n    }, {\n      name: 'Remo pecho apoyado (chest supported row)',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con banda elástica',\n      category: 'Espalda'\n    }, {\n      name: 'Remo unilateral en polea',\n      category: 'Espalda'\n    }, {\n      name: 'Face pulls',\n      category: 'Espalda'\n    }],\n    'Piernas': [{\n      name: 'Sentadilla libre con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla frontal',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla hack',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla goblet',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla con mancuerna',\n      category: 'Piernas'\n    }, {\n      name: 'Prensa 45°',\n      category: 'Piernas'\n    }, {\n      name: 'Prensa horizontal',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas caminando',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas búlgaras',\n      category: 'Piernas'\n    }, {\n      name: 'Peso muerto rumano',\n      category: 'Piernas'\n    }, {\n      name: 'Peso muerto con piernas rígidas',\n      category: 'Piernas'\n    }, {\n      name: 'Buenos días con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Curl femoral acostado',\n      category: 'Piernas'\n    }, {\n      name: 'Curl femoral sentado',\n      category: 'Piernas'\n    }, {\n      name: 'Hip thrust con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Hip thrust en máquina',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla sumo con mancuerna',\n      category: 'Piernas'\n    }, {\n      name: 'Step-ups al banco',\n      category: 'Piernas'\n    }, {\n      name: 'Desplantes con peso',\n      category: 'Piernas'\n    }],\n    'Gemelos': [{\n      name: 'Elevación de talones de pie con barra',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talones en máquina de gemelos',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación sentado en máquina',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talones con mancuerna (una pierna)',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en prensa',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en escalón con barra',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación con peso corporal (altas repeticiones)',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos en punta de pie',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en máquina Smith',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevaciones explosivas',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talón unilateral',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en multipower',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en hack',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos sentado con disco',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos con mancuerna',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos a la comba (en punta)',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos isométricos',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en escalón con pausa',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevaciones con tempo lento',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación con banda elástica',\n      category: 'Gemelos'\n    }],\n    'Hombros': [{\n      name: 'Press militar con barra',\n      category: 'Hombros'\n    }, {\n      name: 'Press militar con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Press Arnold',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones laterales con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones frontales con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones posteriores (deltoide posterior)',\n      category: 'Hombros'\n    }, {\n      name: 'Remo al menton con barra',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones con cables',\n      category: 'Hombros'\n    }, {\n      name: 'Press en máquina',\n      category: 'Hombros'\n    }, {\n      name: 'Press con barra detrás de la nuca',\n      category: 'Hombros'\n    }, {\n      name: 'Pájaros con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Pájaros en peck-deck inversa',\n      category: 'Hombros'\n    }, {\n      name: 'Press con mancuernas sentado',\n      category: 'Hombros'\n    }, {\n      name: 'Elevación lateral unilateral',\n      category: 'Hombros'\n    }, {\n      name: 'Elevación frontal con disco',\n      category: 'Hombros'\n    }, {\n      name: 'Press de hombro en polea',\n      category: 'Hombros'\n    }, {\n      name: 'Remo con mancuerna',\n      category: 'Hombros'\n    }, {\n      name: 'Press landmine unilateral',\n      category: 'Hombros'\n    }, {\n      name: 'Push press',\n      category: 'Hombros'\n    }, {\n      name: 'Face pulls',\n      category: 'Hombros'\n    }],\n    'Tríceps': [{\n      name: 'Fondos en paralelas (tríceps)',\n      category: 'Tríceps'\n    }, {\n      name: 'Fondos en banco',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps en polea alta',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps con cuerda',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión con barra recta en polea',\n      category: 'Tríceps'\n    }, {\n      name: 'Rompecráneos (skullcrushers)',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps con mancuernas',\n      category: 'Tríceps'\n    }, {\n      name: 'Patada de tríceps',\n      category: 'Tríceps'\n    }, {\n      name: 'Press cerrado en banca',\n      category: 'Tríceps'\n    }, {\n      name: 'Press con barra EZ',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en máquina',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión a una mano en polea',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps overhead con cuerda',\n      category: 'Tríceps'\n    }, {\n      name: 'Press francés con barra',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps con barra tras nuca',\n      category: 'Tríceps'\n    }, {\n      name: 'Press de banca con agarre estrecho',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en polea unilateral',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en banda elástica',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps con mancuerna sentado',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión con kettlebell',\n      category: 'Tríceps'\n    }],\n    'Bíceps': [{\n      name: 'Curl con barra',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con barra EZ',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con mancuernas alternado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl concentrado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl predicador',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl en banco inclinado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl martillo',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl martillo en cuerda (polea)',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con polea baja',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl de arrastre',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl spider',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con banda elástica',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl inverso',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl 21s',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl Zottman',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl en máquina Scott',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl doble con giro',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl isométrico',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con kettlebell',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl cruzado (tipo Arnold)',\n      category: 'Bíceps'\n    }],\n    'Abdominales': [{\n      name: 'Crunch abdominal',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch con peso',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en máquina',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch inverso',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en banco declinado',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones de piernas',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones en paralelas',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones colgado',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha abdominal',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha lateral',\n      category: 'Abdominales'\n    }, {\n      name: 'Rueda abdominal (ab wheel)',\n      category: 'Abdominales'\n    }, {\n      name: 'Ab roll en máquina',\n      category: 'Abdominales'\n    }, {\n      name: 'Bicicleta en el suelo',\n      category: 'Abdominales'\n    }, {\n      name: 'Toques al talón',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones con giro',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en polea alta (cable crunch)',\n      category: 'Abdominales'\n    }, {\n      name: 'Sit-up con disco',\n      category: 'Abdominales'\n    }, {\n      name: 'V-ups',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha con toque de hombros',\n      category: 'Abdominales'\n    }, {\n      name: 'Escaladores (mountain climbers)',\n      category: 'Abdominales'\n    }]\n  };\n  try {\n    const batch = writeBatch(db);\n    Object.values(exercisesByCategory).flat().forEach(exercise => {\n      const docRef = doc(collection(db, 'exercises'));\n      batch.set(docRef, exercise);\n    });\n    await batch.commit();\n    return true;\n  } catch (error) {\n    console.error('Error al inicializar ejercicios:', error);\n    throw error;\n  }\n};\n\n// Función para inicializar ejercicios por categoría\nexport const initializeExercisesByCategory = async category => {\n  const exercisesByCategory = {\n    'Pecho': [{\n      name: 'Press banca plano con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press banca plano con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Press inclinado con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press inclinado con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Press declinado con barra',\n      category: 'Pecho'\n    }, {\n      name: 'Press declinado con mancuernas',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con mancuernas en banco plano',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas en banco inclinado',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas en peck-deck (contractora)',\n      category: 'Pecho'\n    }, {\n      name: 'Fondos en paralelas (pecho)',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones clásicas',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones inclinadas',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones con lastre',\n      category: 'Pecho'\n    }, {\n      name: 'Flexiones con palmada',\n      category: 'Pecho'\n    }, {\n      name: 'Press en máquina Hammer',\n      category: 'Pecho'\n    }, {\n      name: 'Press en máquina inclinada',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con polea alta',\n      category: 'Pecho'\n    }, {\n      name: 'Aperturas con polea baja',\n      category: 'Pecho'\n    }, {\n      name: 'Press con polea de pie',\n      category: 'Pecho'\n    }, {\n      name: 'Svend press (con disco)',\n      category: 'Pecho'\n    }],\n    'Espalda': [{\n      name: 'Dominadas pronas',\n      category: 'Espalda'\n    }, {\n      name: 'Dominadas supinas',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con barra',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con mancuerna a una mano',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en máquina Hammer',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en polea baja',\n      category: 'Espalda'\n    }, {\n      name: 'Remo en T-bar',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón al pecho (polea alta)',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón tras nuca',\n      category: 'Espalda'\n    }, {\n      name: 'Jalón al pecho con agarre neutro',\n      category: 'Espalda'\n    }, {\n      name: 'Pull-over con mancuerna',\n      category: 'Espalda'\n    }, {\n      name: 'Pull-over en polea alta',\n      category: 'Espalda'\n    }, {\n      name: 'Remo invertido (inverted row)',\n      category: 'Espalda'\n    }, {\n      name: 'Remo pecho apoyado (chest supported row)',\n      category: 'Espalda'\n    }, {\n      name: 'Remo con banda elástica',\n      category: 'Espalda'\n    }, {\n      name: 'Remo unilateral en polea',\n      category: 'Espalda'\n    }, {\n      name: 'Face pulls',\n      category: 'Espalda'\n    }],\n    'Hombros': [{\n      name: 'Press militar con barra',\n      category: 'Hombros'\n    }, {\n      name: 'Press militar con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Press Arnold',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones laterales con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones frontales con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones posteriores (deltoide posterior)',\n      category: 'Hombros'\n    }, {\n      name: 'Remo al menton con barra',\n      category: 'Hombros'\n    }, {\n      name: 'Elevaciones con cables',\n      category: 'Hombros'\n    }, {\n      name: 'Press en máquina',\n      category: 'Hombros'\n    }, {\n      name: 'Press con barra detrás de la nuca',\n      category: 'Hombros'\n    }, {\n      name: 'Pájaros con mancuernas',\n      category: 'Hombros'\n    }, {\n      name: 'Pájaros en peck-deck inversa',\n      category: 'Hombros'\n    }, {\n      name: 'Press con mancuernas sentado',\n      category: 'Hombros'\n    }, {\n      name: 'Elevación lateral unilateral',\n      category: 'Hombros'\n    }, {\n      name: 'Elevación frontal con disco',\n      category: 'Hombros'\n    }, {\n      name: 'Press de hombro en polea',\n      category: 'Hombros'\n    }, {\n      name: 'Remo con mancuerna',\n      category: 'Hombros'\n    }, {\n      name: 'Press landmine unilateral',\n      category: 'Hombros'\n    }, {\n      name: 'Push press',\n      category: 'Hombros'\n    }, {\n      name: 'Face pulls',\n      category: 'Hombros'\n    }],\n    'Piernas': [{\n      name: 'Sentadilla libre con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla frontal',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla hack',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla goblet',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla con mancuerna',\n      category: 'Piernas'\n    }, {\n      name: 'Prensa 45°',\n      category: 'Piernas'\n    }, {\n      name: 'Prensa horizontal',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas caminando',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Zancadas búlgaras',\n      category: 'Piernas'\n    }, {\n      name: 'Peso muerto rumano',\n      category: 'Piernas'\n    }, {\n      name: 'Peso muerto con piernas rígidas',\n      category: 'Piernas'\n    }, {\n      name: 'Buenos días con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Curl femoral acostado',\n      category: 'Piernas'\n    }, {\n      name: 'Curl femoral sentado',\n      category: 'Piernas'\n    }, {\n      name: 'Hip thrust con barra',\n      category: 'Piernas'\n    }, {\n      name: 'Hip thrust en máquina',\n      category: 'Piernas'\n    }, {\n      name: 'Sentadilla sumo con mancuerna',\n      category: 'Piernas'\n    }, {\n      name: 'Step-ups al banco',\n      category: 'Piernas'\n    }, {\n      name: 'Desplantes con peso',\n      category: 'Piernas'\n    }],\n    'Gemelos': [{\n      name: 'Elevación de talones de pie con barra',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talones en máquina de gemelos',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación sentado en máquina',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talones con mancuerna (una pierna)',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en prensa',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en escalón con barra',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación con peso corporal (altas repeticiones)',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos en punta de pie',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en máquina Smith',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevaciones explosivas',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación de talón unilateral',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en multipower',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos en hack',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos sentado con disco',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos con mancuerna',\n      category: 'Gemelos'\n    }, {\n      name: 'Saltos a la comba (en punta)',\n      category: 'Gemelos'\n    }, {\n      name: 'Gemelos isométricos',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación en escalón con pausa',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevaciones con tempo lento',\n      category: 'Gemelos'\n    }, {\n      name: 'Elevación con banda elástica',\n      category: 'Gemelos'\n    }],\n    'Bíceps': [{\n      name: 'Curl con barra',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con barra EZ',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con mancuernas alternado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl concentrado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl predicador',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl en banco inclinado',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl martillo',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl martillo en cuerda (polea)',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con polea baja',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl de arrastre',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl spider',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con banda elástica',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl inverso',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl 21s',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl Zottman',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl en máquina Scott',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl doble con giro',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl isométrico',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl con kettlebell',\n      category: 'Bíceps'\n    }, {\n      name: 'Curl cruzado (tipo Arnold)',\n      category: 'Bíceps'\n    }],\n    'Tríceps': [{\n      name: 'Fondos en paralelas (tríceps)',\n      category: 'Tríceps'\n    }, {\n      name: 'Fondos en banco',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps en polea alta',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps con cuerda',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión con barra recta en polea',\n      category: 'Tríceps'\n    }, {\n      name: 'Rompecráneos (skullcrushers)',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión de tríceps con mancuernas',\n      category: 'Tríceps'\n    }, {\n      name: 'Patada de tríceps',\n      category: 'Tríceps'\n    }, {\n      name: 'Press cerrado en banca',\n      category: 'Tríceps'\n    }, {\n      name: 'Press con barra EZ',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en máquina',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión a una mano en polea',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps overhead con cuerda',\n      category: 'Tríceps'\n    }, {\n      name: 'Press francés con barra',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps con barra tras nuca',\n      category: 'Tríceps'\n    }, {\n      name: 'Press de banca con agarre estrecho',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en polea unilateral',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps en banda elástica',\n      category: 'Tríceps'\n    }, {\n      name: 'Tríceps con mancuerna sentado',\n      category: 'Tríceps'\n    }, {\n      name: 'Extensión con kettlebell',\n      category: 'Tríceps'\n    }],\n    'Abdominales': [{\n      name: 'Crunch abdominal',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch con peso',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en máquina',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch inverso',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en banco declinado',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones de piernas',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones en paralelas',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones colgado',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha abdominal',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha lateral',\n      category: 'Abdominales'\n    }, {\n      name: 'Rueda abdominal (ab wheel)',\n      category: 'Abdominales'\n    }, {\n      name: 'Ab roll en máquina',\n      category: 'Abdominales'\n    }, {\n      name: 'Bicicleta en el suelo',\n      category: 'Abdominales'\n    }, {\n      name: 'Toques al talón',\n      category: 'Abdominales'\n    }, {\n      name: 'Elevaciones con giro',\n      category: 'Abdominales'\n    }, {\n      name: 'Crunch en polea alta (cable crunch)',\n      category: 'Abdominales'\n    }, {\n      name: 'Sit-up con disco',\n      category: 'Abdominales'\n    }, {\n      name: 'V-ups',\n      category: 'Abdominales'\n    }, {\n      name: 'Plancha con toque de hombros',\n      category: 'Abdominales'\n    }, {\n      name: 'Escaladores (mountain climbers)',\n      category: 'Abdominales'\n    }]\n  };\n  try {\n    // Primero, eliminar los ejercicios existentes de la categoría\n    const exercisesRef = collection(db, 'exercises');\n    const q = query(exercisesRef, where('category', '==', category));\n    const querySnapshot = await getDocs(q);\n    const batch = writeBatch(db);\n\n    // Eliminar ejercicios existentes\n    querySnapshot.forEach(doc => {\n      batch.delete(doc.ref);\n    });\n\n    // Agregar nuevos ejercicios\n    const exercises = exercisesByCategory[category] || [];\n    exercises.forEach(exercise => {\n      const docRef = doc(collection(db, 'exercises'));\n      batch.set(docRef, exercise);\n    });\n    await batch.commit();\n    return true;\n  } catch (error) {\n    console.error('Error al inicializar ejercicios:', error);\n    throw error;\n  }\n};\n\n// Función para guardar la rutina del usuario\nexport const saveUserRoutine = async (userId, routine) => {\n  try {\n    if (!userId) {\n      throw new Error('Se requiere userId para guardar la rutina');\n    }\n\n    // Crear un objeto limpio para la rutina\n    const routineToSave = {\n      lastUpdated: new Date().toISOString()\n    };\n\n    // Asegurarse de que cada día tenga un array de ejercicios válido\n    const days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\n    days.forEach(day => {\n      // Si existe la rutina y tiene ejercicios para este día, copiarlos\n      if (routine && routine[day] && Array.isArray(routine[day])) {\n        routineToSave[day] = routine[day].map(exercise => {\n          // Asegurarse de que cada ejercicio tenga los campos necesarios\n          const cleanExercise = {\n            id: exercise.id || '',\n            name: exercise.name || '',\n            category: exercise.category || '',\n            series: Array.isArray(exercise.series) ? exercise.series.map(serie => ({\n              reps: Number(serie.reps) || 0,\n              weight: Number(serie.weight) || 0,\n              completed: Boolean(serie.completed)\n            })) : []\n          };\n          return cleanExercise;\n        });\n      } else {\n        // Si no hay ejercicios para este día, crear un array vacío\n        routineToSave[day] = [];\n      }\n    });\n\n    // Guardar en Firestore\n    await setDoc(doc(db, 'user_routines', userId), routineToSave);\n    return true;\n  } catch (error) {\n    console.error('Error al guardar la rutina:', error);\n    throw error;\n  }\n};\n\n// Función para crear el usuario administrador\nexport const createAdminUser = async () => {\n  try {\n    const adminEmail = 'admin@sementalfit.com';\n    const adminPassword = 'Admin123!';\n\n    // Intentar iniciar sesión primero\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, adminEmail, adminPassword);\n      const user = userCredential.user;\n\n      // Actualizar el rol a admin\n      await setDoc(doc(db, 'users', user.uid), {\n        role: 'admin'\n      }, {\n        merge: true\n      });\n      console.log('Usuario admin actualizado');\n      return true;\n    } catch (error) {\n      // Si el usuario no existe, crearlo\n      if (error.code === 'auth/user-not-found') {\n        const userCredential = await createUserWithEmailAndPassword(auth, adminEmail, adminPassword);\n        const user = userCredential.user;\n\n        // Crear documento de usuario en Firestore\n        await setDoc(doc(db, 'users', user.uid), {\n          name: 'Administrador',\n          email: adminEmail,\n          role: 'admin',\n          createdAt: new Date().toISOString(),\n          level: 'Administrador',\n          levelName: 'Admin',\n          experience: 999999,\n          nextLevelExp: 999999\n        });\n        console.log('Usuario administrador creado exitosamente');\n        return true;\n      }\n      throw error;\n    }\n  } catch (error) {\n    console.error('Error al crear/actualizar usuario administrador:', error);\n    return false;\n  }\n};\n\n// Función para actualizar el rol de administrador\nexport const updateUserToAdmin = async userId => {\n  try {\n    const userRef = doc(db, 'users', userId);\n    await updateDoc(userRef, {\n      role: 'admin'\n    });\n    console.log('Usuario actualizado a administrador');\n    return true;\n  } catch (error) {\n    console.error('Error al actualizar rol de administrador:', error);\n    return false;\n  }\n};\n\n// Función para limpiar todos los usuarios excepto el admin\nexport const cleanUsers = async () => {\n  try {\n    // Obtener todos los usuarios\n    const usersSnapshot = await getDocs(collection(db, 'users'));\n\n    // Eliminar cada usuario que no sea admin\n    const deletePromises = usersSnapshot.docs.map(async doc => {\n      const userData = doc.data();\n      if (userData.email !== 'nestor.salum@gmail.com') {\n        await deleteDoc(doc.ref);\n        console.log('Usuario eliminado:', userData.email);\n      }\n    });\n    await Promise.all(deletePromises);\n    console.log('Limpieza de usuarios completada');\n    return true;\n  } catch (error) {\n    console.error('Error al limpiar usuarios:', error);\n    return false;\n  }\n};\n\n// Función para actualizar el progreso del usuario\nexport const updateUserProgress = async (userId, action) => {\n  try {\n    const userRef = doc(db, 'users', userId);\n    const userDoc = await getDoc(userRef);\n    if (userDoc.exists()) {\n      const userData = userDoc.data();\n      const currentProgress = userData.progress || 0;\n      let increment = 0;\n\n      // Determinar el incremento basado en la acción\n      switch (action) {\n        case 'day_change':\n          increment = 0.1; // Incremento por cambio de día\n          break;\n        case 'weight_update':\n          increment = 0.05; // Incremento por actualización de peso\n          break;\n        default:\n          increment = 0;\n      }\n\n      // Actualizar el progreso\n      const newProgress = Math.min(currentProgress + increment, 100);\n      await updateDoc(userRef, {\n        progress: newProgress,\n        lastUpdated: new Date()\n      });\n      console.log(`Progreso actualizado: ${newProgress}%`);\n      return newProgress;\n    }\n  } catch (error) {\n    console.error('Error al actualizar progreso:', error);\n    throw error;\n  }\n};\n\n// Función para obtener el perfil completo del usuario\nexport const getUserProfile = async userId => {\n  try {\n    const userRef = doc(db, 'users', userId);\n    const userDoc = await getDoc(userRef);\n    if (userDoc.exists()) {\n      const userData = userDoc.data();\n      return {\n        ...userData,\n        progress: userData.progress || 0,\n        stats: userData.stats || {\n          totalWorkouts: 0,\n          totalExercises: 0,\n          totalWeightLifted: 0,\n          lastWorkout: null\n        },\n        preferences: userData.preferences || {\n          theme: 'dark',\n          notifications: true,\n          language: 'es'\n        }\n      };\n    }\n    return null;\n  } catch (error) {\n    console.error('Error al obtener perfil:', error);\n    throw error;\n  }\n};\n\n// Función para actualizar las estadísticas del usuario de forma simple\nexport const updateUserStatsSimple = async (userId, exerciseData) => {\n  try {\n    const userRef = doc(db, 'users', userId);\n    const userDoc = await getDoc(userRef);\n    if (userDoc.exists()) {\n      const userData = userDoc.data();\n      const currentStats = userData.stats || {\n        totalExercises: 0,\n        totalWeightLifted: 0,\n        totalSets: 0,\n        totalReps: 0\n      };\n\n      // Calcular nuevos valores\n      const totalWeight = exerciseData.series.reduce((sum, serie) => sum + Number(serie.weight) * Number(serie.reps), 0);\n      const totalSets = exerciseData.series.length;\n      const totalReps = exerciseData.series.reduce((sum, serie) => sum + Number(serie.reps), 0);\n\n      // Actualizar directamente en Firestore\n      await updateDoc(userRef, {\n        stats: {\n          totalExercises: currentStats.totalExercises + 1,\n          totalWeightLifted: currentStats.totalWeightLifted + totalWeight,\n          totalSets: currentStats.totalSets + totalSets,\n          totalReps: currentStats.totalReps + totalReps,\n          lastUpdated: new Date()\n        }\n      });\n      console.log('Estadísticas actualizadas correctamente');\n      return true;\n    }\n    return false;\n  } catch (error) {\n    console.error('Error al actualizar estadísticas:', error);\n    return false;\n  }\n};","map":{"version":3,"names":["collection","addDoc","getDocs","doc","getDoc","updateDoc","query","where","arrayUnion","setDoc","writeBatch","limit","deleteDoc","db","createUserWithEmailAndPassword","signInWithEmailAndPassword","auth","createUser","userData","docRef","level","xp","createdAt","Date","lastLogin","id","error","console","checkExercisesInitialized","exercisesRef","q","querySnapshot","empty","initializeAllExercises","categories","category","initializeExercisesByCategory","getUser","exercisesInitialized","log","usersRef","userDoc","docs","data","defaultUser","name","experience","goals","levelName","discount","saveWorkout","userId","workoutData","completedAt","getUserWorkouts","map","updateProgress","progressData","userRef","lastUpdated","getUsers","getAllExercises","newQuerySnapshot","Error","message","createUserRoutine","day","exercises","routineRef","merge","getUserRoutine","routineDoc","exists","newRoutine","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo","toISOString","updateExerciseInRoutine","exerciseId","newData","routineSnap","routine","dayExercises","updatedExercises","ex","initializeExercises","exercisesByCategory","batch","Object","values","flat","forEach","exercise","set","commit","delete","ref","saveUserRoutine","routineToSave","days","Array","isArray","cleanExercise","series","serie","reps","Number","weight","completed","Boolean","createAdminUser","adminEmail","adminPassword","userCredential","user","uid","role","code","email","nextLevelExp","updateUserToAdmin","cleanUsers","usersSnapshot","deletePromises","Promise","all","updateUserProgress","action","currentProgress","progress","increment","newProgress","Math","min","getUserProfile","stats","totalWorkouts","totalExercises","totalWeightLifted","lastWorkout","preferences","theme","notifications","language","updateUserStatsSimple","exerciseData","currentStats","totalSets","totalReps","totalWeight","reduce","sum","length"],"sources":["C:/Users/nessc/AndroidStudioProjects/sementalfit/sementalfit2/src/services/database.js"],"sourcesContent":["import { \r\n    collection, \r\n    addDoc, \r\n    getDocs, \r\n    doc, \r\n    getDoc, \r\n    updateDoc,\r\n    query,\r\n    where,\r\n    arrayUnion,\r\n    setDoc,\r\n    writeBatch,\r\n    limit,\r\n    deleteDoc\r\n} from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '../firebase';\r\n\r\n// Funciones para usuarios\r\nexport const createUser = async (userData) => {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"users\"), {\r\n            ...userData,\r\n            level: 1,\r\n            xp: 0,\r\n            createdAt: new Date(),\r\n            lastLogin: new Date()\r\n        });\r\n        return docRef.id;\r\n    } catch (error) {\r\n        console.error(\"Error al crear usuario:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para verificar si los ejercicios están inicializados\r\nconst checkExercisesInitialized = async () => {\r\n    try {\r\n        const exercisesRef = collection(db, 'exercises');\r\n        const q = query(exercisesRef, limit(1));\r\n        const querySnapshot = await getDocs(q);\r\n        return !querySnapshot.empty;\r\n    } catch (error) {\r\n        console.error('Error al verificar ejercicios:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Función para inicializar todos los ejercicios automáticamente\r\nconst initializeAllExercises = async () => {\r\n    try {\r\n        const categories = ['Pecho', 'Espalda', 'Hombros', 'Piernas', 'Gemelos', 'Bíceps', 'Tríceps', 'Abdominales'];\r\n        for (const category of categories) {\r\n            await initializeExercisesByCategory(category);\r\n        }\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al inicializar ejercicios:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Función para obtener un usuario\r\nexport const getUser = async () => {\r\n    try {\r\n        // Primero verificar si los ejercicios están inicializados\r\n        const exercisesInitialized = await checkExercisesInitialized();\r\n        if (!exercisesInitialized) {\r\n            console.log('Inicializando ejercicios automáticamente...');\r\n            await initializeAllExercises();\r\n        }\r\n\r\n        const usersRef = collection(db, 'users');\r\n        const q = query(usersRef, limit(1));\r\n        const querySnapshot = await getDocs(q);\r\n        \r\n        if (!querySnapshot.empty) {\r\n            const userDoc = querySnapshot.docs[0];\r\n            return {\r\n                id: userDoc.id,\r\n                ...userDoc.data()\r\n            };\r\n        } else {\r\n            // Si no existe ningún usuario, crear uno por defecto\r\n            const defaultUser = {\r\n                name: 'Usuario',\r\n                level: 'Principiante',\r\n                experience: 0,\r\n                goals: ['Ganar masa muscular', 'Mejorar la fuerza'],\r\n                levelName: 'Novato',\r\n                discount: 0.1,\r\n                xp: 0\r\n            };\r\n            \r\n            const docRef = await addDoc(collection(db, 'users'), defaultUser);\r\n            return {\r\n                id: docRef.id,\r\n                ...defaultUser\r\n            };\r\n        }\r\n    } catch (error) {\r\n        console.error('Error al obtener usuario:', error);\r\n        // En caso de error, devolver un usuario por defecto\r\n        return {\r\n            name: 'Usuario',\r\n            level: 'Principiante',\r\n            experience: 0,\r\n            goals: ['Ganar masa muscular', 'Mejorar la fuerza'],\r\n            levelName: 'Novato',\r\n            discount: 0.1,\r\n            xp: 0\r\n        };\r\n    }\r\n};\r\n\r\n// Funciones para rutinas\r\nexport const saveWorkout = async (userId, workoutData) => {\r\n    try {\r\n        const docRef = await addDoc(collection(db, \"workouts\"), {\r\n            userId,\r\n            ...workoutData,\r\n            completedAt: new Date()\r\n        });\r\n        return docRef.id;\r\n    } catch (error) {\r\n        console.error(\"Error al guardar rutina:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getUserWorkouts = async (userId) => {\r\n    try {\r\n        const q = query(collection(db, \"workouts\"), where(\"userId\", \"==\", userId));\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n        }));\r\n    } catch (error) {\r\n        console.error(\"Error al obtener rutinas:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Funciones para progreso\r\nexport const updateProgress = async (userId, progressData) => {\r\n    try {\r\n        const userRef = doc(db, \"users\", userId);\r\n        await updateDoc(userRef, {\r\n            xp: progressData.xp,\r\n            level: progressData.level,\r\n            lastUpdated: new Date()\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Error al actualizar progreso:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para obtener todos los usuarios\r\nexport const getUsers = async () => {\r\n    try {\r\n        const querySnapshot = await getDocs(collection(db, 'users'));\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n        }));\r\n    } catch (error) {\r\n        console.error(\"Error al obtener usuarios:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para obtener todos los ejercicios\r\nexport const getAllExercises = async () => {\r\n    try {\r\n        const exercisesRef = collection(db, 'exercises');\r\n        const querySnapshot = await getDocs(exercisesRef);\r\n        \r\n        if (querySnapshot.empty) {\r\n            console.log('No se encontraron ejercicios, inicializando...');\r\n            await initializeAllExercises();\r\n            // Intentar obtener los ejercicios nuevamente después de inicializar\r\n            const newQuerySnapshot = await getDocs(exercisesRef);\r\n            if (newQuerySnapshot.empty) {\r\n                throw new Error('No se pudieron cargar los ejercicios después de la inicialización');\r\n            }\r\n            return newQuerySnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n        }\r\n\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n        }));\r\n    } catch (error) {\r\n        console.error('Error al obtener ejercicios:', error);\r\n        throw new Error('Error al cargar los ejercicios: ' + error.message);\r\n    }\r\n};\r\n\r\n// Funciones para rutinas personalizadas\r\nexport const createUserRoutine = async (userId, day, exercises) => {\r\n    try {\r\n        const routineRef = doc(db, \"user_routines\", userId);\r\n        await setDoc(routineRef, {\r\n            [day]: exercises\r\n        }, { merge: true });\r\n        return true;\r\n    } catch (error) {\r\n        console.error(\"Error al crear rutina:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const getUserRoutine = async (userId) => {\r\n    try {\r\n        if (!userId) {\r\n            throw new Error('Se requiere userId para obtener la rutina');\r\n        }\r\n\r\n        const routineDoc = await getDoc(doc(db, 'user_routines', userId));\r\n        \r\n        if (routineDoc.exists()) {\r\n            return routineDoc.data();\r\n        } else {\r\n            // Si no existe la rutina, crear una nueva con días vacíos\r\n            const newRoutine = {\r\n                Lunes: [],\r\n                Martes: [],\r\n                Miércoles: [],\r\n                Jueves: [],\r\n                Viernes: [],\r\n                Sábado: [],\r\n                Domingo: [],\r\n                lastUpdated: new Date().toISOString()\r\n            };\r\n            await setDoc(doc(db, 'user_routines', userId), newRoutine);\r\n            return newRoutine;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error al obtener rutina:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const updateExerciseInRoutine = async (userId, day, exerciseId, newData) => {\r\n    try {\r\n        const routineRef = doc(db, \"user_routines\", userId);\r\n        const routineSnap = await getDoc(routineRef);\r\n        if (routineSnap.exists()) {\r\n            const routine = routineSnap.data();\r\n            const dayExercises = routine[day] || [];\r\n            const updatedExercises = dayExercises.map(ex => \r\n                ex.id === exerciseId ? { ...ex, ...newData } : ex\r\n            );\r\n            await updateDoc(routineRef, {\r\n                [day]: updatedExercises\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    } catch (error) {\r\n        console.error(\"Error al actualizar ejercicio:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para inicializar ejercicios en la base de datos\r\nexport const initializeExercises = async () => {\r\n    const exercisesByCategory = {\r\n        'Pecho': [\r\n            { name: 'Press banca plano con barra', category: 'Pecho' },\r\n            { name: 'Press banca plano con mancuernas', category: 'Pecho' },\r\n            { name: 'Press inclinado con barra', category: 'Pecho' },\r\n            { name: 'Press inclinado con mancuernas', category: 'Pecho' },\r\n            { name: 'Press declinado con barra', category: 'Pecho' },\r\n            { name: 'Press declinado con mancuernas', category: 'Pecho' },\r\n            { name: 'Aperturas con mancuernas en banco plano', category: 'Pecho' },\r\n            { name: 'Aperturas en banco inclinado', category: 'Pecho' },\r\n            { name: 'Aperturas en peck-deck (contractora)', category: 'Pecho' },\r\n            { name: 'Fondos en paralelas (pecho)', category: 'Pecho' },\r\n            { name: 'Flexiones clásicas', category: 'Pecho' },\r\n            { name: 'Flexiones inclinadas', category: 'Pecho' },\r\n            { name: 'Flexiones con lastre', category: 'Pecho' },\r\n            { name: 'Flexiones con palmada', category: 'Pecho' },\r\n            { name: 'Press en máquina Hammer', category: 'Pecho' },\r\n            { name: 'Press en máquina inclinada', category: 'Pecho' },\r\n            { name: 'Aperturas con polea alta', category: 'Pecho' },\r\n            { name: 'Aperturas con polea baja', category: 'Pecho' },\r\n            { name: 'Press con polea de pie', category: 'Pecho' },\r\n            { name: 'Svend press (con disco)', category: 'Pecho' }\r\n        ],\r\n        'Espalda': [\r\n            { name: 'Dominadas pronas', category: 'Espalda' },\r\n            { name: 'Dominadas supinas', category: 'Espalda' },\r\n            { name: 'Remo con barra', category: 'Espalda' },\r\n            { name: 'Remo con mancuerna a una mano', category: 'Espalda' },\r\n            { name: 'Remo en máquina Hammer', category: 'Espalda' },\r\n            { name: 'Remo en polea baja', category: 'Espalda' },\r\n            { name: 'Remo en T-bar', category: 'Espalda' },\r\n            { name: 'Jalón al pecho (polea alta)', category: 'Espalda' },\r\n            { name: 'Jalón tras nuca', category: 'Espalda' },\r\n            { name: 'Jalón al pecho con agarre neutro', category: 'Espalda' },\r\n            { name: 'Pull-over con mancuerna', category: 'Espalda' },\r\n            { name: 'Pull-over en polea alta', category: 'Espalda' },\r\n            { name: 'Remo invertido (inverted row)', category: 'Espalda' },\r\n            { name: 'Remo pecho apoyado (chest supported row)', category: 'Espalda' },\r\n            { name: 'Remo con banda elástica', category: 'Espalda' },\r\n            { name: 'Remo unilateral en polea', category: 'Espalda' },\r\n            { name: 'Face pulls', category: 'Espalda' }\r\n        ],\r\n        'Piernas': [\r\n            { name: 'Sentadilla libre con barra', category: 'Piernas' },\r\n            { name: 'Sentadilla frontal', category: 'Piernas' },\r\n            { name: 'Sentadilla hack', category: 'Piernas' },\r\n            { name: 'Sentadilla goblet', category: 'Piernas' },\r\n            { name: 'Sentadilla con mancuerna', category: 'Piernas' },\r\n            { name: 'Prensa 45°', category: 'Piernas' },\r\n            { name: 'Prensa horizontal', category: 'Piernas' },\r\n            { name: 'Zancadas caminando', category: 'Piernas' },\r\n            { name: 'Zancadas con barra', category: 'Piernas' },\r\n            { name: 'Zancadas búlgaras', category: 'Piernas' },\r\n            { name: 'Peso muerto rumano', category: 'Piernas' },\r\n            { name: 'Peso muerto con piernas rígidas', category: 'Piernas' },\r\n            { name: 'Buenos días con barra', category: 'Piernas' },\r\n            { name: 'Curl femoral acostado', category: 'Piernas' },\r\n            { name: 'Curl femoral sentado', category: 'Piernas' },\r\n            { name: 'Hip thrust con barra', category: 'Piernas' },\r\n            { name: 'Hip thrust en máquina', category: 'Piernas' },\r\n            { name: 'Sentadilla sumo con mancuerna', category: 'Piernas' },\r\n            { name: 'Step-ups al banco', category: 'Piernas' },\r\n            { name: 'Desplantes con peso', category: 'Piernas' }\r\n        ],\r\n        'Gemelos': [\r\n            { name: 'Elevación de talones de pie con barra', category: 'Gemelos' },\r\n            { name: 'Elevación de talones en máquina de gemelos', category: 'Gemelos' },\r\n            { name: 'Elevación sentado en máquina', category: 'Gemelos' },\r\n            { name: 'Elevación de talones con mancuerna (una pierna)', category: 'Gemelos' },\r\n            { name: 'Elevación en prensa', category: 'Gemelos' },\r\n            { name: 'Elevación en escalón con barra', category: 'Gemelos' },\r\n            { name: 'Elevación con peso corporal (altas repeticiones)', category: 'Gemelos' },\r\n            { name: 'Saltos en punta de pie', category: 'Gemelos' },\r\n            { name: 'Gemelos en máquina Smith', category: 'Gemelos' },\r\n            { name: 'Elevaciones explosivas', category: 'Gemelos' },\r\n            { name: 'Elevación de talón unilateral', category: 'Gemelos' },\r\n            { name: 'Gemelos en multipower', category: 'Gemelos' },\r\n            { name: 'Gemelos en hack', category: 'Gemelos' },\r\n            { name: 'Gemelos sentado con disco', category: 'Gemelos' },\r\n            { name: 'Saltos con mancuerna', category: 'Gemelos' },\r\n            { name: 'Saltos a la comba (en punta)', category: 'Gemelos' },\r\n            { name: 'Gemelos isométricos', category: 'Gemelos' },\r\n            { name: 'Elevación en escalón con pausa', category: 'Gemelos' },\r\n            { name: 'Elevaciones con tempo lento', category: 'Gemelos' },\r\n            { name: 'Elevación con banda elástica', category: 'Gemelos' }\r\n        ],\r\n        'Hombros': [\r\n            { name: 'Press militar con barra', category: 'Hombros' },\r\n            { name: 'Press militar con mancuernas', category: 'Hombros' },\r\n            { name: 'Press Arnold', category: 'Hombros' },\r\n            { name: 'Elevaciones laterales con mancuernas', category: 'Hombros' },\r\n            { name: 'Elevaciones frontales con mancuernas', category: 'Hombros' },\r\n            { name: 'Elevaciones posteriores (deltoide posterior)', category: 'Hombros' },\r\n            { name: 'Remo al menton con barra', category: 'Hombros' },\r\n            { name: 'Elevaciones con cables', category: 'Hombros' },\r\n            { name: 'Press en máquina', category: 'Hombros' },\r\n            { name: 'Press con barra detrás de la nuca', category: 'Hombros' },\r\n            { name: 'Pájaros con mancuernas', category: 'Hombros' },\r\n            { name: 'Pájaros en peck-deck inversa', category: 'Hombros' },\r\n            { name: 'Press con mancuernas sentado', category: 'Hombros' },\r\n            { name: 'Elevación lateral unilateral', category: 'Hombros' },\r\n            { name: 'Elevación frontal con disco', category: 'Hombros' },\r\n            { name: 'Press de hombro en polea', category: 'Hombros' },\r\n            { name: 'Remo con mancuerna', category: 'Hombros' },\r\n            { name: 'Press landmine unilateral', category: 'Hombros' },\r\n            { name: 'Push press', category: 'Hombros' },\r\n            { name: 'Face pulls', category: 'Hombros' }\r\n        ],\r\n        'Tríceps': [\r\n            { name: 'Fondos en paralelas (tríceps)', category: 'Tríceps' },\r\n            { name: 'Fondos en banco', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps en polea alta', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps con cuerda', category: 'Tríceps' },\r\n            { name: 'Extensión con barra recta en polea', category: 'Tríceps' },\r\n            { name: 'Rompecráneos (skullcrushers)', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps con mancuernas', category: 'Tríceps' },\r\n            { name: 'Patada de tríceps', category: 'Tríceps' },\r\n            { name: 'Press cerrado en banca', category: 'Tríceps' },\r\n            { name: 'Press con barra EZ', category: 'Tríceps' },\r\n            { name: 'Tríceps en máquina', category: 'Tríceps' },\r\n            { name: 'Extensión a una mano en polea', category: 'Tríceps' },\r\n            { name: 'Tríceps overhead con cuerda', category: 'Tríceps' },\r\n            { name: 'Press francés con barra', category: 'Tríceps' },\r\n            { name: 'Tríceps con barra tras nuca', category: 'Tríceps' },\r\n            { name: 'Press de banca con agarre estrecho', category: 'Tríceps' },\r\n            { name: 'Tríceps en polea unilateral', category: 'Tríceps' },\r\n            { name: 'Tríceps en banda elástica', category: 'Tríceps' },\r\n            { name: 'Tríceps con mancuerna sentado', category: 'Tríceps' },\r\n            { name: 'Extensión con kettlebell', category: 'Tríceps' }\r\n        ],\r\n        'Bíceps': [\r\n            { name: 'Curl con barra', category: 'Bíceps' },\r\n            { name: 'Curl con barra EZ', category: 'Bíceps' },\r\n            { name: 'Curl con mancuernas alternado', category: 'Bíceps' },\r\n            { name: 'Curl concentrado', category: 'Bíceps' },\r\n            { name: 'Curl predicador', category: 'Bíceps' },\r\n            { name: 'Curl en banco inclinado', category: 'Bíceps' },\r\n            { name: 'Curl martillo', category: 'Bíceps' },\r\n            { name: 'Curl martillo en cuerda (polea)', category: 'Bíceps' },\r\n            { name: 'Curl con polea baja', category: 'Bíceps' },\r\n            { name: 'Curl de arrastre', category: 'Bíceps' },\r\n            { name: 'Curl spider', category: 'Bíceps' },\r\n            { name: 'Curl con banda elástica', category: 'Bíceps' },\r\n            { name: 'Curl inverso', category: 'Bíceps' },\r\n            { name: 'Curl 21s', category: 'Bíceps' },\r\n            { name: 'Curl Zottman', category: 'Bíceps' },\r\n            { name: 'Curl en máquina Scott', category: 'Bíceps' },\r\n            { name: 'Curl doble con giro', category: 'Bíceps' },\r\n            { name: 'Curl isométrico', category: 'Bíceps' },\r\n            { name: 'Curl con kettlebell', category: 'Bíceps' },\r\n            { name: 'Curl cruzado (tipo Arnold)', category: 'Bíceps' }\r\n        ],\r\n        'Abdominales': [\r\n            { name: 'Crunch abdominal', category: 'Abdominales' },\r\n            { name: 'Crunch con peso', category: 'Abdominales' },\r\n            { name: 'Crunch en máquina', category: 'Abdominales' },\r\n            { name: 'Crunch inverso', category: 'Abdominales' },\r\n            { name: 'Crunch en banco declinado', category: 'Abdominales' },\r\n            { name: 'Elevaciones de piernas', category: 'Abdominales' },\r\n            { name: 'Elevaciones en paralelas', category: 'Abdominales' },\r\n            { name: 'Elevaciones colgado', category: 'Abdominales' },\r\n            { name: 'Plancha abdominal', category: 'Abdominales' },\r\n            { name: 'Plancha lateral', category: 'Abdominales' },\r\n            { name: 'Rueda abdominal (ab wheel)', category: 'Abdominales' },\r\n            { name: 'Ab roll en máquina', category: 'Abdominales' },\r\n            { name: 'Bicicleta en el suelo', category: 'Abdominales' },\r\n            { name: 'Toques al talón', category: 'Abdominales' },\r\n            { name: 'Elevaciones con giro', category: 'Abdominales' },\r\n            { name: 'Crunch en polea alta (cable crunch)', category: 'Abdominales' },\r\n            { name: 'Sit-up con disco', category: 'Abdominales' },\r\n            { name: 'V-ups', category: 'Abdominales' },\r\n            { name: 'Plancha con toque de hombros', category: 'Abdominales' },\r\n            { name: 'Escaladores (mountain climbers)', category: 'Abdominales' }\r\n        ]\r\n    };\r\n\r\n    try {\r\n        const batch = writeBatch(db);\r\n        Object.values(exercisesByCategory).flat().forEach(exercise => {\r\n            const docRef = doc(collection(db, 'exercises'));\r\n            batch.set(docRef, exercise);\r\n        });\r\n        await batch.commit();\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al inicializar ejercicios:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para inicializar ejercicios por categoría\r\nexport const initializeExercisesByCategory = async (category) => {\r\n    const exercisesByCategory = {\r\n        'Pecho': [\r\n            { name: 'Press banca plano con barra', category: 'Pecho' },\r\n            { name: 'Press banca plano con mancuernas', category: 'Pecho' },\r\n            { name: 'Press inclinado con barra', category: 'Pecho' },\r\n            { name: 'Press inclinado con mancuernas', category: 'Pecho' },\r\n            { name: 'Press declinado con barra', category: 'Pecho' },\r\n            { name: 'Press declinado con mancuernas', category: 'Pecho' },\r\n            { name: 'Aperturas con mancuernas en banco plano', category: 'Pecho' },\r\n            { name: 'Aperturas en banco inclinado', category: 'Pecho' },\r\n            { name: 'Aperturas en peck-deck (contractora)', category: 'Pecho' },\r\n            { name: 'Fondos en paralelas (pecho)', category: 'Pecho' },\r\n            { name: 'Flexiones clásicas', category: 'Pecho' },\r\n            { name: 'Flexiones inclinadas', category: 'Pecho' },\r\n            { name: 'Flexiones con lastre', category: 'Pecho' },\r\n            { name: 'Flexiones con palmada', category: 'Pecho' },\r\n            { name: 'Press en máquina Hammer', category: 'Pecho' },\r\n            { name: 'Press en máquina inclinada', category: 'Pecho' },\r\n            { name: 'Aperturas con polea alta', category: 'Pecho' },\r\n            { name: 'Aperturas con polea baja', category: 'Pecho' },\r\n            { name: 'Press con polea de pie', category: 'Pecho' },\r\n            { name: 'Svend press (con disco)', category: 'Pecho' }\r\n        ],\r\n        'Espalda': [\r\n            { name: 'Dominadas pronas', category: 'Espalda' },\r\n            { name: 'Dominadas supinas', category: 'Espalda' },\r\n            { name: 'Remo con barra', category: 'Espalda' },\r\n            { name: 'Remo con mancuerna a una mano', category: 'Espalda' },\r\n            { name: 'Remo en máquina Hammer', category: 'Espalda' },\r\n            { name: 'Remo en polea baja', category: 'Espalda' },\r\n            { name: 'Remo en T-bar', category: 'Espalda' },\r\n            { name: 'Jalón al pecho (polea alta)', category: 'Espalda' },\r\n            { name: 'Jalón tras nuca', category: 'Espalda' },\r\n            { name: 'Jalón al pecho con agarre neutro', category: 'Espalda' },\r\n            { name: 'Pull-over con mancuerna', category: 'Espalda' },\r\n            { name: 'Pull-over en polea alta', category: 'Espalda' },\r\n            { name: 'Remo invertido (inverted row)', category: 'Espalda' },\r\n            { name: 'Remo pecho apoyado (chest supported row)', category: 'Espalda' },\r\n            { name: 'Remo con banda elástica', category: 'Espalda' },\r\n            { name: 'Remo unilateral en polea', category: 'Espalda' },\r\n            { name: 'Face pulls', category: 'Espalda' }\r\n        ],\r\n        'Hombros': [\r\n            { name: 'Press militar con barra', category: 'Hombros' },\r\n            { name: 'Press militar con mancuernas', category: 'Hombros' },\r\n            { name: 'Press Arnold', category: 'Hombros' },\r\n            { name: 'Elevaciones laterales con mancuernas', category: 'Hombros' },\r\n            { name: 'Elevaciones frontales con mancuernas', category: 'Hombros' },\r\n            { name: 'Elevaciones posteriores (deltoide posterior)', category: 'Hombros' },\r\n            { name: 'Remo al menton con barra', category: 'Hombros' },\r\n            { name: 'Elevaciones con cables', category: 'Hombros' },\r\n            { name: 'Press en máquina', category: 'Hombros' },\r\n            { name: 'Press con barra detrás de la nuca', category: 'Hombros' },\r\n            { name: 'Pájaros con mancuernas', category: 'Hombros' },\r\n            { name: 'Pájaros en peck-deck inversa', category: 'Hombros' },\r\n            { name: 'Press con mancuernas sentado', category: 'Hombros' },\r\n            { name: 'Elevación lateral unilateral', category: 'Hombros' },\r\n            { name: 'Elevación frontal con disco', category: 'Hombros' },\r\n            { name: 'Press de hombro en polea', category: 'Hombros' },\r\n            { name: 'Remo con mancuerna', category: 'Hombros' },\r\n            { name: 'Press landmine unilateral', category: 'Hombros' },\r\n            { name: 'Push press', category: 'Hombros' },\r\n            { name: 'Face pulls', category: 'Hombros' }\r\n        ],\r\n        'Piernas': [\r\n            { name: 'Sentadilla libre con barra', category: 'Piernas' },\r\n            { name: 'Sentadilla frontal', category: 'Piernas' },\r\n            { name: 'Sentadilla hack', category: 'Piernas' },\r\n            { name: 'Sentadilla goblet', category: 'Piernas' },\r\n            { name: 'Sentadilla con mancuerna', category: 'Piernas' },\r\n            { name: 'Prensa 45°', category: 'Piernas' },\r\n            { name: 'Prensa horizontal', category: 'Piernas' },\r\n            { name: 'Zancadas caminando', category: 'Piernas' },\r\n            { name: 'Zancadas con barra', category: 'Piernas' },\r\n            { name: 'Zancadas búlgaras', category: 'Piernas' },\r\n            { name: 'Peso muerto rumano', category: 'Piernas' },\r\n            { name: 'Peso muerto con piernas rígidas', category: 'Piernas' },\r\n            { name: 'Buenos días con barra', category: 'Piernas' },\r\n            { name: 'Curl femoral acostado', category: 'Piernas' },\r\n            { name: 'Curl femoral sentado', category: 'Piernas' },\r\n            { name: 'Hip thrust con barra', category: 'Piernas' },\r\n            { name: 'Hip thrust en máquina', category: 'Piernas' },\r\n            { name: 'Sentadilla sumo con mancuerna', category: 'Piernas' },\r\n            { name: 'Step-ups al banco', category: 'Piernas' },\r\n            { name: 'Desplantes con peso', category: 'Piernas' }\r\n        ],\r\n        'Gemelos': [\r\n            { name: 'Elevación de talones de pie con barra', category: 'Gemelos' },\r\n            { name: 'Elevación de talones en máquina de gemelos', category: 'Gemelos' },\r\n            { name: 'Elevación sentado en máquina', category: 'Gemelos' },\r\n            { name: 'Elevación de talones con mancuerna (una pierna)', category: 'Gemelos' },\r\n            { name: 'Elevación en prensa', category: 'Gemelos' },\r\n            { name: 'Elevación en escalón con barra', category: 'Gemelos' },\r\n            { name: 'Elevación con peso corporal (altas repeticiones)', category: 'Gemelos' },\r\n            { name: 'Saltos en punta de pie', category: 'Gemelos' },\r\n            { name: 'Gemelos en máquina Smith', category: 'Gemelos' },\r\n            { name: 'Elevaciones explosivas', category: 'Gemelos' },\r\n            { name: 'Elevación de talón unilateral', category: 'Gemelos' },\r\n            { name: 'Gemelos en multipower', category: 'Gemelos' },\r\n            { name: 'Gemelos en hack', category: 'Gemelos' },\r\n            { name: 'Gemelos sentado con disco', category: 'Gemelos' },\r\n            { name: 'Saltos con mancuerna', category: 'Gemelos' },\r\n            { name: 'Saltos a la comba (en punta)', category: 'Gemelos' },\r\n            { name: 'Gemelos isométricos', category: 'Gemelos' },\r\n            { name: 'Elevación en escalón con pausa', category: 'Gemelos' },\r\n            { name: 'Elevaciones con tempo lento', category: 'Gemelos' },\r\n            { name: 'Elevación con banda elástica', category: 'Gemelos' }\r\n        ],\r\n        'Bíceps': [\r\n            { name: 'Curl con barra', category: 'Bíceps' },\r\n            { name: 'Curl con barra EZ', category: 'Bíceps' },\r\n            { name: 'Curl con mancuernas alternado', category: 'Bíceps' },\r\n            { name: 'Curl concentrado', category: 'Bíceps' },\r\n            { name: 'Curl predicador', category: 'Bíceps' },\r\n            { name: 'Curl en banco inclinado', category: 'Bíceps' },\r\n            { name: 'Curl martillo', category: 'Bíceps' },\r\n            { name: 'Curl martillo en cuerda (polea)', category: 'Bíceps' },\r\n            { name: 'Curl con polea baja', category: 'Bíceps' },\r\n            { name: 'Curl de arrastre', category: 'Bíceps' },\r\n            { name: 'Curl spider', category: 'Bíceps' },\r\n            { name: 'Curl con banda elástica', category: 'Bíceps' },\r\n            { name: 'Curl inverso', category: 'Bíceps' },\r\n            { name: 'Curl 21s', category: 'Bíceps' },\r\n            { name: 'Curl Zottman', category: 'Bíceps' },\r\n            { name: 'Curl en máquina Scott', category: 'Bíceps' },\r\n            { name: 'Curl doble con giro', category: 'Bíceps' },\r\n            { name: 'Curl isométrico', category: 'Bíceps' },\r\n            { name: 'Curl con kettlebell', category: 'Bíceps' },\r\n            { name: 'Curl cruzado (tipo Arnold)', category: 'Bíceps' }\r\n        ],\r\n        'Tríceps': [\r\n            { name: 'Fondos en paralelas (tríceps)', category: 'Tríceps' },\r\n            { name: 'Fondos en banco', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps en polea alta', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps con cuerda', category: 'Tríceps' },\r\n            { name: 'Extensión con barra recta en polea', category: 'Tríceps' },\r\n            { name: 'Rompecráneos (skullcrushers)', category: 'Tríceps' },\r\n            { name: 'Extensión de tríceps con mancuernas', category: 'Tríceps' },\r\n            { name: 'Patada de tríceps', category: 'Tríceps' },\r\n            { name: 'Press cerrado en banca', category: 'Tríceps' },\r\n            { name: 'Press con barra EZ', category: 'Tríceps' },\r\n            { name: 'Tríceps en máquina', category: 'Tríceps' },\r\n            { name: 'Extensión a una mano en polea', category: 'Tríceps' },\r\n            { name: 'Tríceps overhead con cuerda', category: 'Tríceps' },\r\n            { name: 'Press francés con barra', category: 'Tríceps' },\r\n            { name: 'Tríceps con barra tras nuca', category: 'Tríceps' },\r\n            { name: 'Press de banca con agarre estrecho', category: 'Tríceps' },\r\n            { name: 'Tríceps en polea unilateral', category: 'Tríceps' },\r\n            { name: 'Tríceps en banda elástica', category: 'Tríceps' },\r\n            { name: 'Tríceps con mancuerna sentado', category: 'Tríceps' },\r\n            { name: 'Extensión con kettlebell', category: 'Tríceps' }\r\n        ],\r\n        'Abdominales': [\r\n            { name: 'Crunch abdominal', category: 'Abdominales' },\r\n            { name: 'Crunch con peso', category: 'Abdominales' },\r\n            { name: 'Crunch en máquina', category: 'Abdominales' },\r\n            { name: 'Crunch inverso', category: 'Abdominales' },\r\n            { name: 'Crunch en banco declinado', category: 'Abdominales' },\r\n            { name: 'Elevaciones de piernas', category: 'Abdominales' },\r\n            { name: 'Elevaciones en paralelas', category: 'Abdominales' },\r\n            { name: 'Elevaciones colgado', category: 'Abdominales' },\r\n            { name: 'Plancha abdominal', category: 'Abdominales' },\r\n            { name: 'Plancha lateral', category: 'Abdominales' },\r\n            { name: 'Rueda abdominal (ab wheel)', category: 'Abdominales' },\r\n            { name: 'Ab roll en máquina', category: 'Abdominales' },\r\n            { name: 'Bicicleta en el suelo', category: 'Abdominales' },\r\n            { name: 'Toques al talón', category: 'Abdominales' },\r\n            { name: 'Elevaciones con giro', category: 'Abdominales' },\r\n            { name: 'Crunch en polea alta (cable crunch)', category: 'Abdominales' },\r\n            { name: 'Sit-up con disco', category: 'Abdominales' },\r\n            { name: 'V-ups', category: 'Abdominales' },\r\n            { name: 'Plancha con toque de hombros', category: 'Abdominales' },\r\n            { name: 'Escaladores (mountain climbers)', category: 'Abdominales' }\r\n        ]\r\n    };\r\n\r\n    try {\r\n        // Primero, eliminar los ejercicios existentes de la categoría\r\n        const exercisesRef = collection(db, 'exercises');\r\n        const q = query(exercisesRef, where('category', '==', category));\r\n        const querySnapshot = await getDocs(q);\r\n        \r\n        const batch = writeBatch(db);\r\n        \r\n        // Eliminar ejercicios existentes\r\n        querySnapshot.forEach((doc) => {\r\n            batch.delete(doc.ref);\r\n        });\r\n\r\n        // Agregar nuevos ejercicios\r\n        const exercises = exercisesByCategory[category] || [];\r\n        exercises.forEach(exercise => {\r\n            const docRef = doc(collection(db, 'exercises'));\r\n            batch.set(docRef, exercise);\r\n        });\r\n\r\n        await batch.commit();\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al inicializar ejercicios:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para guardar la rutina del usuario\r\nexport const saveUserRoutine = async (userId, routine) => {\r\n    try {\r\n        if (!userId) {\r\n            throw new Error('Se requiere userId para guardar la rutina');\r\n        }\r\n\r\n        // Crear un objeto limpio para la rutina\r\n        const routineToSave = {\r\n            lastUpdated: new Date().toISOString()\r\n        };\r\n\r\n        // Asegurarse de que cada día tenga un array de ejercicios válido\r\n        const days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'];\r\n        days.forEach(day => {\r\n            // Si existe la rutina y tiene ejercicios para este día, copiarlos\r\n            if (routine && routine[day] && Array.isArray(routine[day])) {\r\n                routineToSave[day] = routine[day].map(exercise => {\r\n                    // Asegurarse de que cada ejercicio tenga los campos necesarios\r\n                    const cleanExercise = {\r\n                        id: exercise.id || '',\r\n                        name: exercise.name || '',\r\n                        category: exercise.category || '',\r\n                        series: Array.isArray(exercise.series) ? exercise.series.map(serie => ({\r\n                            reps: Number(serie.reps) || 0,\r\n                            weight: Number(serie.weight) || 0,\r\n                            completed: Boolean(serie.completed)\r\n                        })) : []\r\n                    };\r\n                    return cleanExercise;\r\n                });\r\n            } else {\r\n                // Si no hay ejercicios para este día, crear un array vacío\r\n                routineToSave[day] = [];\r\n            }\r\n        });\r\n\r\n        // Guardar en Firestore\r\n        await setDoc(doc(db, 'user_routines', userId), routineToSave);\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al guardar la rutina:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para crear el usuario administrador\r\nexport const createAdminUser = async () => {\r\n    try {\r\n        const adminEmail = 'admin@sementalfit.com';\r\n        const adminPassword = 'Admin123!';\r\n        \r\n        // Intentar iniciar sesión primero\r\n        try {\r\n            const userCredential = await signInWithEmailAndPassword(auth, adminEmail, adminPassword);\r\n            const user = userCredential.user;\r\n            \r\n            // Actualizar el rol a admin\r\n            await setDoc(doc(db, 'users', user.uid), {\r\n                role: 'admin'\r\n            }, { merge: true });\r\n            \r\n            console.log('Usuario admin actualizado');\r\n            return true;\r\n        } catch (error) {\r\n            // Si el usuario no existe, crearlo\r\n            if (error.code === 'auth/user-not-found') {\r\n                const userCredential = await createUserWithEmailAndPassword(auth, adminEmail, adminPassword);\r\n                const user = userCredential.user;\r\n\r\n                // Crear documento de usuario en Firestore\r\n                await setDoc(doc(db, 'users', user.uid), {\r\n                    name: 'Administrador',\r\n                    email: adminEmail,\r\n                    role: 'admin',\r\n                    createdAt: new Date().toISOString(),\r\n                    level: 'Administrador',\r\n                    levelName: 'Admin',\r\n                    experience: 999999,\r\n                    nextLevelExp: 999999\r\n                });\r\n\r\n                console.log('Usuario administrador creado exitosamente');\r\n                return true;\r\n            }\r\n            throw error;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error al crear/actualizar usuario administrador:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Función para actualizar el rol de administrador\r\nexport const updateUserToAdmin = async (userId) => {\r\n    try {\r\n        const userRef = doc(db, 'users', userId);\r\n        await updateDoc(userRef, {\r\n            role: 'admin'\r\n        });\r\n        console.log('Usuario actualizado a administrador');\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al actualizar rol de administrador:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Función para limpiar todos los usuarios excepto el admin\r\nexport const cleanUsers = async () => {\r\n    try {\r\n        // Obtener todos los usuarios\r\n        const usersSnapshot = await getDocs(collection(db, 'users'));\r\n        \r\n        // Eliminar cada usuario que no sea admin\r\n        const deletePromises = usersSnapshot.docs.map(async (doc) => {\r\n            const userData = doc.data();\r\n            if (userData.email !== 'nestor.salum@gmail.com') {\r\n                await deleteDoc(doc.ref);\r\n                console.log('Usuario eliminado:', userData.email);\r\n            }\r\n        });\r\n\r\n        await Promise.all(deletePromises);\r\n        console.log('Limpieza de usuarios completada');\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error al limpiar usuarios:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Función para actualizar el progreso del usuario\r\nexport const updateUserProgress = async (userId, action) => {\r\n    try {\r\n        const userRef = doc(db, 'users', userId);\r\n        const userDoc = await getDoc(userRef);\r\n        \r\n        if (userDoc.exists()) {\r\n            const userData = userDoc.data();\r\n            const currentProgress = userData.progress || 0;\r\n            let increment = 0;\r\n\r\n            // Determinar el incremento basado en la acción\r\n            switch (action) {\r\n                case 'day_change':\r\n                    increment = 0.1; // Incremento por cambio de día\r\n                    break;\r\n                case 'weight_update':\r\n                    increment = 0.05; // Incremento por actualización de peso\r\n                    break;\r\n                default:\r\n                    increment = 0;\r\n            }\r\n\r\n            // Actualizar el progreso\r\n            const newProgress = Math.min(currentProgress + increment, 100);\r\n            await updateDoc(userRef, {\r\n                progress: newProgress,\r\n                lastUpdated: new Date()\r\n            });\r\n\r\n            console.log(`Progreso actualizado: ${newProgress}%`);\r\n            return newProgress;\r\n        }\r\n    } catch (error) {\r\n        console.error('Error al actualizar progreso:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para obtener el perfil completo del usuario\r\nexport const getUserProfile = async (userId) => {\r\n    try {\r\n        const userRef = doc(db, 'users', userId);\r\n        const userDoc = await getDoc(userRef);\r\n        \r\n        if (userDoc.exists()) {\r\n            const userData = userDoc.data();\r\n            return {\r\n                ...userData,\r\n                progress: userData.progress || 0,\r\n                stats: userData.stats || {\r\n                    totalWorkouts: 0,\r\n                    totalExercises: 0,\r\n                    totalWeightLifted: 0,\r\n                    lastWorkout: null\r\n                },\r\n                preferences: userData.preferences || {\r\n                    theme: 'dark',\r\n                    notifications: true,\r\n                    language: 'es'\r\n                }\r\n            };\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        console.error('Error al obtener perfil:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// Función para actualizar las estadísticas del usuario de forma simple\r\nexport const updateUserStatsSimple = async (userId, exerciseData) => {\r\n    try {\r\n        const userRef = doc(db, 'users', userId);\r\n        const userDoc = await getDoc(userRef);\r\n        \r\n        if (userDoc.exists()) {\r\n            const userData = userDoc.data();\r\n            const currentStats = userData.stats || {\r\n                totalExercises: 0,\r\n                totalWeightLifted: 0,\r\n                totalSets: 0,\r\n                totalReps: 0\r\n            };\r\n\r\n            // Calcular nuevos valores\r\n            const totalWeight = exerciseData.series.reduce((sum, serie) => \r\n                sum + (Number(serie.weight) * Number(serie.reps)), 0);\r\n            const totalSets = exerciseData.series.length;\r\n            const totalReps = exerciseData.series.reduce((sum, serie) => \r\n                sum + Number(serie.reps), 0);\r\n\r\n            // Actualizar directamente en Firestore\r\n            await updateDoc(userRef, {\r\n                stats: {\r\n                    totalExercises: currentStats.totalExercises + 1,\r\n                    totalWeightLifted: currentStats.totalWeightLifted + totalWeight,\r\n                    totalSets: currentStats.totalSets + totalSets,\r\n                    totalReps: currentStats.totalReps + totalReps,\r\n                    lastUpdated: new Date()\r\n                }\r\n            });\r\n\r\n            console.log('Estadísticas actualizadas correctamente');\r\n            return true;\r\n        }\r\n        return false;\r\n    } catch (error) {\r\n        console.error('Error al actualizar estadísticas:', error);\r\n        return false;\r\n    }\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}