{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nessc\\\\Semental fit ultima\\\\sementalfit2\\\\src\\\\components\\\\AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc, query, where, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { db, storage } from '../firebase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Header from './Header';\nimport { addAllExercises } from '../services/exerciseService';\nimport { useNavigate } from 'react-router-dom';\nimport RoutinesNew from './RoutinesNew';\nimport { createUserWithEmailAndPassword, signOut, signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminPage() {\n  _s();\n  const [exercise, setExercise] = useState({\n    name: '',\n    categoryId: '',\n    description: '',\n    difficulty: 'Principiante'\n  });\n  const [exercises, setExercises] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editExercise, setEditExercise] = useState(null);\n  const [editCategory, setEditCategory] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [error, setError] = useState(null);\n  const {\n    register\n  } = useAuth();\n  const [ptForm, setPtForm] = useState({\n    name: '',\n    email: '',\n    password: ''\n  });\n  const [ptLoading, setPtLoading] = useState(false);\n  const [ptError, setPtError] = useState('');\n  const [ptSuccess, setPtSuccess] = useState('');\n  const [products, setProducts] = useState([]);\n  const [showProductForm, setShowProductForm] = useState(false);\n  const [product, setProduct] = useState({\n    name: '',\n    description: '',\n    price: '',\n    stock: '',\n    imageUrl: '',\n    category: ''\n  });\n  const [editProduct, setEditProduct] = useState(null);\n  const [productCategories, setProductCategories] = useState([]);\n  const [isAddingExercises, setIsAddingExercises] = useState(false);\n  const [isMigratingCategories, setIsMigratingCategories] = useState(false);\n  const [expandedCategory, setExpandedCategory] = useState(null);\n  const navigate = useNavigate();\n  const [section, setSection] = useState('main');\n  const [exerciseForm, setExerciseForm] = useState({\n    name: '',\n    categoryId: '',\n    difficulty: 'Principiante',\n    description: '',\n    imageUrl: ''\n  });\n  const [editExerciseId, setEditExerciseId] = useState(null);\n  const [exercisePage, setExercisePage] = useState(1);\n  const exercisesPerPage = 10;\n\n  // Rutinas\n  const [routineForm, setRoutineForm] = useState({\n    name: '',\n    description: ''\n  });\n  // Nutrición\n  const [nutritionForm, setNutritionForm] = useState({\n    name: '',\n    description: ''\n  });\n  // Shop\n  const [shopForm, setShopForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    stock: '',\n    imageUrl: ''\n  });\n\n  // Estados para Rutinas avanzadas\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedExercise, setSelectedExercise] = useState('');\n  const [routineExerciseSets, setRoutineExerciseSets] = useState([{\n    weight: 0,\n    reps: 0,\n    timerMin: 0,\n    timerSec: 0\n  }]);\n  const [routineExercises, setRoutineExercises] = useState([]);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [personalTrainers, setPersonalTrainers] = useState([]);\n  const loadProducts = useCallback(async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, 'products'));\n      const productsList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setProducts(productsList);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n      setError('Error al cargar productos: ' + error.message);\n    }\n  }, []);\n  const loadExercises = useCallback(async () => {\n    try {\n      let exercisesQuery = collection(db, 'exercises');\n      if (filterCategory) {\n        exercisesQuery = query(exercisesQuery, where('categoryId', '==', filterCategory));\n      }\n      const querySnapshot = await getDocs(exercisesQuery);\n      let exercisesList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      if (searchTerm) {\n        exercisesList = exercisesList.filter(exercise => exercise.name.toLowerCase().includes(searchTerm.toLowerCase()));\n      }\n      setExercises(exercisesList);\n      setError(null);\n    } catch (error) {\n      console.error('Error al cargar ejercicios:', error);\n      setError('Error al cargar ejercicios: ' + error.message);\n    }\n  }, [filterCategory, searchTerm]);\n  const loadCategories = async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, 'categories'));\n      const categoriesList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setCategories(categoriesList);\n    } catch (error) {\n      console.error('Error al cargar categorías:', error);\n      alert('Error al cargar categorías: ' + error.message);\n    }\n  };\n  const loadPersonalTrainers = useCallback(async () => {\n    try {\n      const q = query(collection(db, 'users'), where('role', '==', 2));\n      const querySnapshot = await getDocs(q);\n      const trainers = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPersonalTrainers(trainers);\n    } catch (error) {\n      console.error('Error al cargar personal trainers:', error);\n    }\n  }, []);\n  useEffect(() => {\n    loadCategories();\n    loadExercises();\n    loadProducts();\n    loadPersonalTrainers();\n  }, [loadExercises, loadProducts, loadPersonalTrainers]);\n  useEffect(() => {\n    const loadProductCategories = async () => {\n      try {\n        const categoriesSnapshot = await getDocs(collection(db, 'productCategories'));\n        const categories = categoriesSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        console.log('Categorías cargadas:', categories); // Para debugging\n        setProductCategories(categories);\n      } catch (error) {\n        console.error('Error loading product categories:', error);\n      }\n    };\n    loadProductCategories();\n  }, []);\n  const handleAddCategory = async e => {\n    e.preventDefault();\n    if (!newCategoryName.trim()) return;\n    setIsLoading(true);\n    try {\n      if (editCategory) {\n        const categoryRef = doc(db, 'categories', editCategory.id);\n        await updateDoc(categoryRef, {\n          name: newCategoryName.trim()\n        });\n        alert('Categoría actualizada correctamente');\n        setEditCategory(null);\n      } else {\n        await addDoc(collection(db, 'categories'), {\n          name: newCategoryName.trim(),\n          createdAt: new Date().toISOString()\n        });\n        alert('Categoría agregada correctamente');\n      }\n      setNewCategoryName('');\n      loadCategories();\n    } catch (error) {\n      console.error(`Error al ${editCategory ? 'actualizar' : 'agregar'} categoría:`, error);\n      alert(`Error al ${editCategory ? 'actualizar' : 'agregar'} categoría: ` + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleEditCategory = categoryToEdit => {\n    setEditCategory(categoryToEdit);\n    setNewCategoryName(categoryToEdit.name);\n  };\n  const handleDeleteCategory = async id => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar esta categoría? Esto no eliminará los ejercicios asociados a ella.')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'categories', id));\n        loadCategories();\n        alert('Categoría eliminada correctamente');\n      } catch (error) {\n        console.error('Error al eliminar categoría:', error);\n        alert('Error al eliminar categoría: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n  const handleImageUpload = async () => {\n    if (!imageFile) return null;\n    try {\n      const storageRef = ref(storage, `exercise_images/${imageFile.name}_${Date.now()}`);\n      const snapshot = await uploadBytes(storageRef, imageFile);\n      return await getDownloadURL(snapshot.ref);\n    } catch (error) {\n      console.error('Error al subir imagen:', error);\n      throw new Error('Error al subir la imagen: ' + error.message);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      await register(email, password, name, 2);\n      setSuccess('Personal Trainer creado exitosamente');\n      setEmail('');\n      setPassword('');\n      setName('');\n      loadPersonalTrainers(); // Recargar la lista después de crear uno nuevo\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setExercise(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleFileChange = e => {\n    if (e.target.files[0]) {\n      setImageFile(e.target.files[0]);\n    }\n  };\n  const handleEdit = exerciseToEdit => {\n    setEditExercise(exerciseToEdit);\n    setExercise({\n      name: exerciseToEdit.name,\n      categoryId: exerciseToEdit.categoryId,\n      description: exerciseToEdit.description || '',\n      difficulty: exerciseToEdit.difficulty || 'Principiante',\n      imageUrl: exerciseToEdit.imageUrl || ''\n    });\n    setImageFile(null);\n    setShowAddForm(true);\n  };\n  const handleDelete = async id => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este ejercicio?')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'exercises', id));\n        loadExercises();\n        alert('Ejercicio eliminado correctamente');\n      } catch (error) {\n        console.error('Error al eliminar ejercicio:', error);\n        alert('Error al eliminar ejercicio: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n  const getCategoryName = categoryId => {\n    const category = categories.find(cat => cat.id === categoryId);\n    return category ? category.name : 'Sin categoría';\n  };\n  const handlePtChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPtForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleAddPT = async e => {\n    e.preventDefault();\n    try {\n      // Crear el usuario en Firestore directamente\n      const ptRef = await addDoc(collection(db, 'users'), {\n        email: ptForm.email,\n        role: 2,\n        // Rol 2 para Personal Trainer\n        name: ptForm.name,\n        createdAt: serverTimestamp(),\n        password: ptForm.password // Nota: En producción, esto debería manejarse de forma más segura\n      });\n      setPtForm({\n        name: '',\n        email: '',\n        password: ''\n      });\n      alert('Personal Trainer agregado correctamente');\n    } catch (error) {\n      console.error('Error al agregar PT:', error);\n      alert('Error al agregar Personal Trainer: ' + error.message);\n    }\n  };\n  const handleProductChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProduct(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleProductSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    try {\n      const productData = {\n        name: product.name,\n        description: product.description,\n        price: Number(product.price),\n        stock: Number(product.stock),\n        imageUrl: product.imageUrl,\n        category: product.category,\n        createdAt: new Date().toISOString()\n      };\n      if (editProduct) {\n        const productRef = doc(db, 'products', editProduct.id);\n        await updateDoc(productRef, productData);\n        alert('Producto actualizado correctamente');\n        setEditProduct(null);\n      } else {\n        await addDoc(collection(db, 'products'), productData);\n        alert('Producto agregado correctamente');\n      }\n      setProduct({\n        name: '',\n        description: '',\n        price: '',\n        stock: '',\n        imageUrl: '',\n        category: ''\n      });\n      setShowProductForm(false);\n      loadProducts();\n    } catch (error) {\n      console.error('Error al guardar producto:', error);\n      setError('Error al guardar producto: ' + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleEditProduct = productToEdit => {\n    setEditProduct(productToEdit);\n    setProduct({\n      name: productToEdit.name,\n      description: productToEdit.description,\n      price: productToEdit.price.toString(),\n      stock: productToEdit.stock.toString(),\n      imageUrl: productToEdit.imageUrl || '',\n      category: productToEdit.category\n    });\n    setShowProductForm(true);\n  };\n  const handleDeleteProduct = async id => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este producto?')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'products', id));\n        loadProducts();\n        alert('Producto eliminado correctamente');\n      } catch (error) {\n        console.error('Error al eliminar producto:', error);\n        alert('Error al eliminar producto: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n  const handleAddExercises = async () => {\n    try {\n      setIsAddingExercises(true);\n      await addAllExercises();\n      alert('Ejercicios agregados correctamente');\n    } catch (error) {\n      console.error('Error al agregar ejercicios:', error);\n      alert('Error al agregar ejercicios');\n    } finally {\n      setIsAddingExercises(false);\n    }\n  };\n\n  // Mapeo de nombres de categoría a IDs reales (ajusta según tus datos en Firestore)\n  const categoryNameToId = {\n    'Abdominales': 'ID_DE_ABDOMINALES',\n    'Antebrazos': 'ID_DE_ANTEBRAZOS',\n    'Gemelos': 'ID_DE_GEMELOS',\n    'Espalda': 'ID_DE_ESPALDA',\n    'Hombros': 'ID_DE_HOMBROS',\n    'Bíceps': 'ID_DE_BICEPS',\n    'Tríceps': 'ID_DE_TRICEPS',\n    'Cuádriceps': 'ID_DE_CUADRICEPS',\n    'Femorales': 'ID_DE_FEMORALES',\n    'Calisténicos': 'ID_DE_CALISTENICOS'\n    // ... agrega el resto de tus categorías aquí ...\n  };\n  const handleMigrateCategoryIds = async () => {\n    setIsMigratingCategories(true);\n    try {\n      const exercisesSnapshot = await getDocs(collection(db, 'exercises'));\n      let updated = 0;\n      for (const exerciseDoc of exercisesSnapshot.docs) {\n        const data = exerciseDoc.data();\n        const categoryName = data.category;\n        const categoryId = categoryNameToId[categoryName];\n        if (categoryId) {\n          await updateDoc(doc(db, 'exercises', exerciseDoc.id), {\n            categoryId\n          });\n          updated++;\n        }\n      }\n      alert(`Migración completada. Ejercicios actualizados: ${updated}`);\n    } catch (error) {\n      alert('Error durante la migración: ' + error.message);\n    } finally {\n      setIsMigratingCategories(false);\n    }\n  };\n\n  // Agrupar ejercicios por categoría\n  const exercisesByCategory = categories.reduce((acc, cat) => {\n    acc[cat.id] = exercises.filter(ex => ex.categoryId === cat.id);\n    return acc;\n  }, {});\n  const handleExerciseChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setExerciseForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleAddExercise = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      if (editExerciseId) {\n        await updateDoc(doc(db, 'exercises', editExerciseId), exerciseForm);\n        setEditExerciseId(null);\n      } else {\n        await addDoc(collection(db, 'exercises'), {\n          ...exerciseForm,\n          createdAt: new Date().toISOString()\n        });\n      }\n      setExerciseForm({\n        name: '',\n        categoryId: '',\n        difficulty: 'Principiante',\n        description: '',\n        imageUrl: ''\n      });\n      loadExercises();\n      alert('Ejercicio guardado correctamente');\n    } catch (error) {\n      alert('Error al guardar ejercicio');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Rutinas\n  const handleRoutineChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRoutineForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleAddRoutine = async e => {\n    e.preventDefault();\n    await addDoc(collection(db, 'routines'), {\n      ...routineForm,\n      exercises: routineExercises\n    });\n    setRoutineForm({\n      name: '',\n      description: ''\n    });\n    setRoutineExercises([]);\n    alert('Rutina agregada correctamente');\n  };\n\n  // Nutrición\n  const handleNutritionChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNutritionForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleAddNutrition = async e => {\n    e.preventDefault();\n    await addDoc(collection(db, 'nutrition'), nutritionForm);\n    setNutritionForm({\n      name: '',\n      description: ''\n    });\n    alert('Plan nutricional agregado correctamente');\n  };\n\n  // Shop\n  const handleShopChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setShopForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleAddShop = async e => {\n    e.preventDefault();\n    await addDoc(collection(db, 'products'), {\n      ...shopForm,\n      price: Number(shopForm.price),\n      stock: Number(shopForm.stock)\n    });\n    setShopForm({\n      name: '',\n      description: '',\n      price: '',\n      stock: '',\n      imageUrl: ''\n    });\n    alert('Producto agregado correctamente');\n  };\n\n  // Paginación ejercicios\n  const totalExercisePages = Math.ceil(exercises.length / exercisesPerPage);\n  const paginatedExercises = exercises.slice((exercisePage - 1) * exercisesPerPage, exercisePage * exercisesPerPage);\n\n  // Actualizar un set\n  const updateRoutineSet = (idx, field, value) => {\n    setRoutineExerciseSets(prev => prev.map((set, i) => i === idx ? {\n      ...set,\n      [field]: value\n    } : set));\n  };\n  // Eliminar un set\n  const removeRoutineSet = idx => {\n    setRoutineExerciseSets(prev => prev.filter((_, i) => i !== idx));\n  };\n  // Agregar un set\n  const addRoutineSet = () => {\n    setRoutineExerciseSets(prev => [...prev, {\n      weight: 0,\n      reps: 0,\n      timerMin: 0,\n      timerSec: 0\n    }]);\n  };\n  // Agregar ejercicio a la rutina\n  const addRoutineExercise = () => {\n    if (!selectedExercise) return;\n    const exerciseObj = exercises.find(e => e.id === selectedExercise);\n    setRoutineExercises(prev => [...prev, {\n      exerciseId: selectedExercise,\n      exerciseName: (exerciseObj === null || exerciseObj === void 0 ? void 0 : exerciseObj.name) || '',\n      sets: routineExerciseSets.map(set => ({\n        weight: Number(set.weight) || 0,\n        reps: Number(set.reps) || 0,\n        timer: {\n          min: Number(set.timerMin) || 0,\n          sec: Number(set.timerSec) || 0\n        }\n      }))\n    }]);\n    setSelectedExercise('');\n    setRoutineExerciseSets([{\n      weight: 0,\n      reps: 0,\n      timerMin: 0,\n      timerSec: 0\n    }]);\n  };\n  // Eliminar ejercicio de la rutina\n  const removeRoutineExercise = idx => {\n    setRoutineExercises(prev => prev.filter((_, i) => i !== idx));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-black text-white\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-yellow-400 mb-8\",\n        children: \"Panel de Administraci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-900 p-6 rounded-lg shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-yellow-400 mb-6\",\n            children: \"Crear Personal Trainer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-red-500 text-white p-3 rounded mb-4\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 23\n          }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-500 text-white p-3 rounded mb-4\",\n            children: success\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-yellow-400 mb-2\",\n                children: \"Nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: name,\n                onChange: e => setName(e.target.value),\n                className: \"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-yellow-400 mb-2\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                value: email,\n                onChange: e => setEmail(e.target.value),\n                className: \"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 615,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-yellow-400 mb-2\",\n                children: \"Contrase\\xF1a\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: password,\n                onChange: e => setPassword(e.target.value),\n                className: \"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading,\n              className: \"w-full bg-yellow-500 text-black font-bold py-2 px-4 rounded hover:bg-yellow-600 disabled:opacity-50\",\n              children: loading ? 'Creando...' : 'Crear Personal Trainer'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-900 p-6 rounded-lg shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-yellow-400 mb-6\",\n            children: \"Personal Trainers Registrados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 13\n          }, this), personalTrainers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"No hay personal trainers registrados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: personalTrainers.map(trainer => {\n              var _trainer$createdAt;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-800 p-4 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-yellow-400\",\n                  children: trainer.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-300\",\n                  children: trainer.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-400\",\n                  children: [\"Registrado: \", (_trainer$createdAt = trainer.createdAt) === null || _trainer$createdAt === void 0 ? void 0 : _trainer$createdAt.toDate().toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 654,\n                  columnNumber: 21\n                }, this)]\n              }, trainer.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 591,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminPage, \"gX3az39Irhi6Tn56CUC+wAe6VVs=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","collection","addDoc","getDocs","updateDoc","deleteDoc","doc","query","where","setDoc","serverTimestamp","ref","uploadBytes","getDownloadURL","db","storage","useAuth","Header","addAllExercises","useNavigate","RoutinesNew","createUserWithEmailAndPassword","signOut","signInWithEmailAndPassword","auth","jsxDEV","_jsxDEV","AdminPage","_s","exercise","setExercise","name","categoryId","description","difficulty","exercises","setExercises","categories","setCategories","newCategoryName","setNewCategoryName","showAddForm","setShowAddForm","isLoading","setIsLoading","editExercise","setEditExercise","editCategory","setEditCategory","searchTerm","setSearchTerm","filterCategory","setFilterCategory","imageFile","setImageFile","error","setError","register","ptForm","setPtForm","email","password","ptLoading","setPtLoading","ptError","setPtError","ptSuccess","setPtSuccess","products","setProducts","showProductForm","setShowProductForm","product","setProduct","price","stock","imageUrl","category","editProduct","setEditProduct","productCategories","setProductCategories","isAddingExercises","setIsAddingExercises","isMigratingCategories","setIsMigratingCategories","expandedCategory","setExpandedCategory","navigate","section","setSection","exerciseForm","setExerciseForm","editExerciseId","setEditExerciseId","exercisePage","setExercisePage","exercisesPerPage","routineForm","setRoutineForm","nutritionForm","setNutritionForm","shopForm","setShopForm","selectedCategory","setSelectedCategory","selectedExercise","setSelectedExercise","routineExerciseSets","setRoutineExerciseSets","weight","reps","timerMin","timerSec","routineExercises","setRoutineExercises","setEmail","setPassword","setName","success","setSuccess","loading","setLoading","personalTrainers","setPersonalTrainers","loadProducts","querySnapshot","productsList","docs","map","id","data","console","message","loadExercises","exercisesQuery","exercisesList","filter","toLowerCase","includes","loadCategories","categoriesList","alert","loadPersonalTrainers","q","trainers","loadProductCategories","categoriesSnapshot","log","handleAddCategory","e","preventDefault","trim","categoryRef","createdAt","Date","toISOString","handleEditCategory","categoryToEdit","handleDeleteCategory","window","confirm","handleImageUpload","storageRef","now","snapshot","Error","handleSubmit","handleChange","value","target","prev","handleFileChange","files","handleEdit","exerciseToEdit","handleDelete","getCategoryName","find","cat","handlePtChange","handleAddPT","ptRef","role","handleProductChange","handleProductSubmit","productData","Number","productRef","handleEditProduct","productToEdit","toString","handleDeleteProduct","handleAddExercises","categoryNameToId","handleMigrateCategoryIds","exercisesSnapshot","updated","exerciseDoc","categoryName","exercisesByCategory","reduce","acc","ex","handleExerciseChange","handleAddExercise","handleRoutineChange","handleAddRoutine","handleNutritionChange","handleAddNutrition","handleShopChange","handleAddShop","totalExercisePages","Math","ceil","length","paginatedExercises","slice","updateRoutineSet","idx","field","set","i","removeRoutineSet","_","addRoutineSet","addRoutineExercise","exerciseObj","exerciseId","exerciseName","sets","timer","min","sec","removeRoutineExercise","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","required","disabled","trainer","_trainer$createdAt","toDate","toLocaleDateString","_c","$RefreshReg$"],"sources":["C:/Users/nessc/Semental fit ultima/sementalfit2/src/components/AdminPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc, query, where, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { db, storage } from '../firebase';\nimport { useAuth } from '../contexts/AuthContext';\nimport Header from './Header';\nimport { addAllExercises } from '../services/exerciseService';\nimport { useNavigate } from 'react-router-dom';\nimport RoutinesNew from './RoutinesNew';\nimport { createUserWithEmailAndPassword, signOut, signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebase';\n\nexport default function AdminPage() {\n  const [exercise, setExercise] = useState({\n    name: '',\n    categoryId: '',\n    description: '',\n    difficulty: 'Principiante'\n  });\n\n  const [exercises, setExercises] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editExercise, setEditExercise] = useState(null);\n  const [editCategory, setEditCategory] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [error, setError] = useState(null);\n  const { register } = useAuth();\n  const [ptForm, setPtForm] = useState({\n    name: '',\n    email: '',\n    password: ''\n  });\n  const [ptLoading, setPtLoading] = useState(false);\n  const [ptError, setPtError] = useState('');\n  const [ptSuccess, setPtSuccess] = useState('');\n  const [products, setProducts] = useState([]);\n  const [showProductForm, setShowProductForm] = useState(false);\n  const [product, setProduct] = useState({\n    name: '',\n    description: '',\n    price: '',\n    stock: '',\n    imageUrl: '',\n    category: ''\n  });\n  const [editProduct, setEditProduct] = useState(null);\n  const [productCategories, setProductCategories] = useState([]);\n  const [isAddingExercises, setIsAddingExercises] = useState(false);\n  const [isMigratingCategories, setIsMigratingCategories] = useState(false);\n  const [expandedCategory, setExpandedCategory] = useState(null);\n  const navigate = useNavigate();\n  const [section, setSection] = useState('main');\n  const [exerciseForm, setExerciseForm] = useState({\n    name: '',\n    categoryId: '',\n    difficulty: 'Principiante',\n    description: '',\n    imageUrl: ''\n  });\n  const [editExerciseId, setEditExerciseId] = useState(null);\n  const [exercisePage, setExercisePage] = useState(1);\n  const exercisesPerPage = 10;\n\n  // Rutinas\n  const [routineForm, setRoutineForm] = useState({ name: '', description: '' });\n  // Nutrición\n  const [nutritionForm, setNutritionForm] = useState({ name: '', description: '' });\n  // Shop\n  const [shopForm, setShopForm] = useState({ name: '', description: '', price: '', stock: '', imageUrl: '' });\n\n  // Estados para Rutinas avanzadas\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedExercise, setSelectedExercise] = useState('');\n  const [routineExerciseSets, setRoutineExerciseSets] = useState([\n    { weight: 0, reps: 0, timerMin: 0, timerSec: 0 }\n  ]);\n  const [routineExercises, setRoutineExercises] = useState([]);\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [personalTrainers, setPersonalTrainers] = useState([]);\n\n  const loadProducts = useCallback(async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, 'products'));\n      const productsList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setProducts(productsList);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n      setError('Error al cargar productos: ' + error.message);\n    }\n  }, []);\n\n  const loadExercises = useCallback(async () => {\n    try {\n      let exercisesQuery = collection(db, 'exercises');\n      \n      if (filterCategory) {\n        exercisesQuery = query(exercisesQuery, where('categoryId', '==', filterCategory));\n      }\n\n      const querySnapshot = await getDocs(exercisesQuery);\n      let exercisesList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n\n      if (searchTerm) {\n        exercisesList = exercisesList.filter(exercise =>\n          exercise.name.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n      }\n      setExercises(exercisesList);\n      setError(null);\n    } catch (error) {\n      console.error('Error al cargar ejercicios:', error);\n      setError('Error al cargar ejercicios: ' + error.message);\n    }\n  }, [filterCategory, searchTerm]);\n\n  const loadCategories = async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, 'categories'));\n      const categoriesList = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setCategories(categoriesList);\n    } catch (error) {\n      console.error('Error al cargar categorías:', error);\n      alert('Error al cargar categorías: ' + error.message);\n    }\n  };\n\n  const loadPersonalTrainers = useCallback(async () => {\n    try {\n      const q = query(collection(db, 'users'), where('role', '==', 2));\n      const querySnapshot = await getDocs(q);\n      const trainers = querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setPersonalTrainers(trainers);\n    } catch (error) {\n      console.error('Error al cargar personal trainers:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadCategories();\n    loadExercises();\n    loadProducts();\n    loadPersonalTrainers();\n  }, [loadExercises, loadProducts, loadPersonalTrainers]);\n\n  useEffect(() => {\n    const loadProductCategories = async () => {\n      try {\n        const categoriesSnapshot = await getDocs(collection(db, 'productCategories'));\n        const categories = categoriesSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        console.log('Categorías cargadas:', categories); // Para debugging\n        setProductCategories(categories);\n      } catch (error) {\n        console.error('Error loading product categories:', error);\n      }\n    };\n    loadProductCategories();\n  }, []);\n\n  const handleAddCategory = async (e) => {\n    e.preventDefault();\n    if (!newCategoryName.trim()) return;\n\n    setIsLoading(true);\n    try {\n      if (editCategory) {\n        const categoryRef = doc(db, 'categories', editCategory.id);\n        await updateDoc(categoryRef, {\n          name: newCategoryName.trim(),\n        });\n        alert('Categoría actualizada correctamente');\n        setEditCategory(null);\n      } else {\n        await addDoc(collection(db, 'categories'), {\n          name: newCategoryName.trim(),\n          createdAt: new Date().toISOString()\n        });\n        alert('Categoría agregada correctamente');\n      }\n      setNewCategoryName('');\n      loadCategories();\n    } catch (error) {\n      console.error(`Error al ${editCategory ? 'actualizar' : 'agregar'} categoría:`, error);\n      alert(`Error al ${editCategory ? 'actualizar' : 'agregar'} categoría: ` + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEditCategory = (categoryToEdit) => {\n    setEditCategory(categoryToEdit);\n    setNewCategoryName(categoryToEdit.name);\n  };\n\n  const handleDeleteCategory = async (id) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar esta categoría? Esto no eliminará los ejercicios asociados a ella.')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'categories', id));\n        loadCategories();\n        alert('Categoría eliminada correctamente');\n      } catch (error) {\n        console.error('Error al eliminar categoría:', error);\n        alert('Error al eliminar categoría: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const handleImageUpload = async () => {\n    if (!imageFile) return null;\n    \n    try {\n      const storageRef = ref(storage, `exercise_images/${imageFile.name}_${Date.now()}`);\n      const snapshot = await uploadBytes(storageRef, imageFile);\n      return await getDownloadURL(snapshot.ref);\n    } catch (error) {\n      console.error('Error al subir imagen:', error);\n      throw new Error('Error al subir la imagen: ' + error.message);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      setError('');\n      setSuccess('');\n      setLoading(true);\n      await register(email, password, name, 2);\n      setSuccess('Personal Trainer creado exitosamente');\n      setEmail('');\n      setPassword('');\n      setName('');\n      loadPersonalTrainers(); // Recargar la lista después de crear uno nuevo\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setExercise(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setImageFile(e.target.files[0]);\n    }\n  };\n\n  const handleEdit = (exerciseToEdit) => {\n    setEditExercise(exerciseToEdit);\n    setExercise({\n      name: exerciseToEdit.name,\n      categoryId: exerciseToEdit.categoryId,\n      description: exerciseToEdit.description || '',\n      difficulty: exerciseToEdit.difficulty || 'Principiante',\n      imageUrl: exerciseToEdit.imageUrl || ''\n    });\n    setImageFile(null);\n    setShowAddForm(true);\n  };\n\n  const handleDelete = async (id) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este ejercicio?')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'exercises', id));\n        loadExercises();\n        alert('Ejercicio eliminado correctamente');\n      } catch (error) {\n        console.error('Error al eliminar ejercicio:', error);\n        alert('Error al eliminar ejercicio: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const getCategoryName = (categoryId) => {\n    const category = categories.find(cat => cat.id === categoryId);\n    return category ? category.name : 'Sin categoría';\n  };\n\n  const handlePtChange = (e) => {\n    const { name, value } = e.target;\n    setPtForm(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleAddPT = async (e) => {\n    e.preventDefault();\n    try {\n      // Crear el usuario en Firestore directamente\n      const ptRef = await addDoc(collection(db, 'users'), {\n        email: ptForm.email,\n        role: 2, // Rol 2 para Personal Trainer\n        name: ptForm.name,\n        createdAt: serverTimestamp(),\n        password: ptForm.password // Nota: En producción, esto debería manejarse de forma más segura\n      });\n\n      setPtForm({ name: '', email: '', password: '' });\n      alert('Personal Trainer agregado correctamente');\n    } catch (error) {\n      console.error('Error al agregar PT:', error);\n      alert('Error al agregar Personal Trainer: ' + error.message);\n    }\n  };\n\n  const handleProductChange = (e) => {\n    const { name, value } = e.target;\n    setProduct(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleProductSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const productData = {\n        name: product.name,\n        description: product.description,\n        price: Number(product.price),\n        stock: Number(product.stock),\n        imageUrl: product.imageUrl,\n        category: product.category,\n        createdAt: new Date().toISOString()\n      };\n\n      if (editProduct) {\n        const productRef = doc(db, 'products', editProduct.id);\n        await updateDoc(productRef, productData);\n        alert('Producto actualizado correctamente');\n        setEditProduct(null);\n      } else {\n        await addDoc(collection(db, 'products'), productData);\n        alert('Producto agregado correctamente');\n      }\n\n      setProduct({\n        name: '',\n        description: '',\n        price: '',\n        stock: '',\n        imageUrl: '',\n        category: ''\n      });\n      setShowProductForm(false);\n      loadProducts();\n    } catch (error) {\n      console.error('Error al guardar producto:', error);\n      setError('Error al guardar producto: ' + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEditProduct = (productToEdit) => {\n    setEditProduct(productToEdit);\n    setProduct({\n      name: productToEdit.name,\n      description: productToEdit.description,\n      price: productToEdit.price.toString(),\n      stock: productToEdit.stock.toString(),\n      imageUrl: productToEdit.imageUrl || '',\n      category: productToEdit.category\n    });\n    setShowProductForm(true);\n  };\n\n  const handleDeleteProduct = async (id) => {\n    if (window.confirm('¿Estás seguro de que quieres eliminar este producto?')) {\n      setIsLoading(true);\n      try {\n        await deleteDoc(doc(db, 'products', id));\n        loadProducts();\n        alert('Producto eliminado correctamente');\n      } catch (error) {\n        console.error('Error al eliminar producto:', error);\n        alert('Error al eliminar producto: ' + error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const handleAddExercises = async () => {\n    try {\n      setIsAddingExercises(true);\n      await addAllExercises();\n      alert('Ejercicios agregados correctamente');\n    } catch (error) {\n      console.error('Error al agregar ejercicios:', error);\n      alert('Error al agregar ejercicios');\n    } finally {\n      setIsAddingExercises(false);\n    }\n  };\n\n  // Mapeo de nombres de categoría a IDs reales (ajusta según tus datos en Firestore)\n  const categoryNameToId = {\n    'Abdominales': 'ID_DE_ABDOMINALES',\n    'Antebrazos': 'ID_DE_ANTEBRAZOS',\n    'Gemelos': 'ID_DE_GEMELOS',\n    'Espalda': 'ID_DE_ESPALDA',\n    'Hombros': 'ID_DE_HOMBROS',\n    'Bíceps': 'ID_DE_BICEPS',\n    'Tríceps': 'ID_DE_TRICEPS',\n    'Cuádriceps': 'ID_DE_CUADRICEPS',\n    'Femorales': 'ID_DE_FEMORALES',\n    'Calisténicos': 'ID_DE_CALISTENICOS',\n    // ... agrega el resto de tus categorías aquí ...\n  };\n\n  const handleMigrateCategoryIds = async () => {\n    setIsMigratingCategories(true);\n    try {\n      const exercisesSnapshot = await getDocs(collection(db, 'exercises'));\n      let updated = 0;\n      for (const exerciseDoc of exercisesSnapshot.docs) {\n        const data = exerciseDoc.data();\n        const categoryName = data.category;\n        const categoryId = categoryNameToId[categoryName];\n        if (categoryId) {\n          await updateDoc(doc(db, 'exercises', exerciseDoc.id), {\n            categoryId\n          });\n          updated++;\n        }\n      }\n      alert(`Migración completada. Ejercicios actualizados: ${updated}`);\n    } catch (error) {\n      alert('Error durante la migración: ' + error.message);\n    } finally {\n      setIsMigratingCategories(false);\n    }\n  };\n\n  // Agrupar ejercicios por categoría\n  const exercisesByCategory = categories.reduce((acc, cat) => {\n    acc[cat.id] = exercises.filter(ex => ex.categoryId === cat.id);\n    return acc;\n  }, {});\n\n  const handleExerciseChange = (e) => {\n    const { name, value } = e.target;\n    setExerciseForm(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleAddExercise = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      if (editExerciseId) {\n        await updateDoc(doc(db, 'exercises', editExerciseId), exerciseForm);\n        setEditExerciseId(null);\n      } else {\n        await addDoc(collection(db, 'exercises'), {\n          ...exerciseForm,\n          createdAt: new Date().toISOString()\n        });\n      }\n      setExerciseForm({ name: '', categoryId: '', difficulty: 'Principiante', description: '', imageUrl: '' });\n      loadExercises();\n      alert('Ejercicio guardado correctamente');\n    } catch (error) {\n      alert('Error al guardar ejercicio');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Rutinas\n  const handleRoutineChange = (e) => {\n    const { name, value } = e.target;\n    setRoutineForm(prev => ({ ...prev, [name]: value }));\n  };\n  const handleAddRoutine = async (e) => {\n    e.preventDefault();\n    await addDoc(collection(db, 'routines'), {\n      ...routineForm,\n      exercises: routineExercises\n    });\n    setRoutineForm({ name: '', description: '' });\n    setRoutineExercises([]);\n    alert('Rutina agregada correctamente');\n  };\n\n  // Nutrición\n  const handleNutritionChange = (e) => {\n    const { name, value } = e.target;\n    setNutritionForm(prev => ({ ...prev, [name]: value }));\n  };\n  const handleAddNutrition = async (e) => {\n    e.preventDefault();\n    await addDoc(collection(db, 'nutrition'), nutritionForm);\n    setNutritionForm({ name: '', description: '' });\n    alert('Plan nutricional agregado correctamente');\n  };\n\n  // Shop\n  const handleShopChange = (e) => {\n    const { name, value } = e.target;\n    setShopForm(prev => ({ ...prev, [name]: value }));\n  };\n  const handleAddShop = async (e) => {\n    e.preventDefault();\n    await addDoc(collection(db, 'products'), { ...shopForm, price: Number(shopForm.price), stock: Number(shopForm.stock) });\n    setShopForm({ name: '', description: '', price: '', stock: '', imageUrl: '' });\n    alert('Producto agregado correctamente');\n  };\n\n  // Paginación ejercicios\n  const totalExercisePages = Math.ceil(exercises.length / exercisesPerPage);\n  const paginatedExercises = exercises.slice((exercisePage - 1) * exercisesPerPage, exercisePage * exercisesPerPage);\n\n  // Actualizar un set\n  const updateRoutineSet = (idx, field, value) => {\n    setRoutineExerciseSets(prev => prev.map((set, i) => i === idx ? { ...set, [field]: value } : set));\n  };\n  // Eliminar un set\n  const removeRoutineSet = (idx) => {\n    setRoutineExerciseSets(prev => prev.filter((_, i) => i !== idx));\n  };\n  // Agregar un set\n  const addRoutineSet = () => {\n    setRoutineExerciseSets(prev => [...prev, { weight: 0, reps: 0, timerMin: 0, timerSec: 0 }]);\n  };\n  // Agregar ejercicio a la rutina\n  const addRoutineExercise = () => {\n    if (!selectedExercise) return;\n    const exerciseObj = exercises.find(e => e.id === selectedExercise);\n    setRoutineExercises(prev => ([\n      ...prev,\n      {\n        exerciseId: selectedExercise,\n        exerciseName: exerciseObj?.name || '',\n        sets: routineExerciseSets.map(set => ({\n          weight: Number(set.weight) || 0,\n          reps: Number(set.reps) || 0,\n          timer: {\n            min: Number(set.timerMin) || 0,\n            sec: Number(set.timerSec) || 0\n          }\n        }))\n      }\n    ]));\n    setSelectedExercise('');\n    setRoutineExerciseSets([{ weight: 0, reps: 0, timerMin: 0, timerSec: 0 }]);\n  };\n  // Eliminar ejercicio de la rutina\n  const removeRoutineExercise = (idx) => {\n    setRoutineExercises(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <Header />\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <h1 className=\"text-3xl font-bold text-yellow-400 mb-8\">Panel de Administración</h1>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          {/* Formulario de creación */}\n          <div className=\"bg-gray-900 p-6 rounded-lg shadow-lg\">\n            <h2 className=\"text-2xl font-bold text-yellow-400 mb-6\">Crear Personal Trainer</h2>\n            {error && <div className=\"bg-red-500 text-white p-3 rounded mb-4\">{error}</div>}\n            {success && <div className=\"bg-green-500 text-white p-3 rounded mb-4\">{success}</div>}\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-yellow-400 mb-2\">Nombre</label>\n                <input\n                  type=\"text\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  className=\"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-yellow-400 mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-yellow-400 mb-2\">Contraseña</label>\n                <input\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:border-yellow-500 focus:outline-none\"\n                  required\n                />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full bg-yellow-500 text-black font-bold py-2 px-4 rounded hover:bg-yellow-600 disabled:opacity-50\"\n              >\n                {loading ? 'Creando...' : 'Crear Personal Trainer'}\n              </button>\n            </form>\n          </div>\n\n          {/* Lista de Personal Trainers */}\n          <div className=\"bg-gray-900 p-6 rounded-lg shadow-lg\">\n            <h2 className=\"text-2xl font-bold text-yellow-400 mb-6\">Personal Trainers Registrados</h2>\n            {personalTrainers.length === 0 ? (\n              <p className=\"text-gray-400\">No hay personal trainers registrados</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {personalTrainers.map((trainer) => (\n                  <div key={trainer.id} className=\"bg-gray-800 p-4 rounded-lg\">\n                    <h3 className=\"text-lg font-semibold text-yellow-400\">{trainer.name}</h3>\n                    <p className=\"text-gray-300\">{trainer.email}</p>\n                    <p className=\"text-sm text-gray-400\">\n                      Registrado: {trainer.createdAt?.toDate().toLocaleDateString()}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}